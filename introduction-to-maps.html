<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Introduction to Mapping in R | An Introduction to Spatial Data Analysis and Statistics: A Course in R</title>
  <meta name="description" content="This book was created as a resource for teaching applied spatial statistics at McMaster University by Antonio Paez, with support from Anastassios Dardas, Rajveer Ubhi, Megan Coad, and Alexis Polidoro. The book is published with support of an Open Educational Resources grant from MacPherson Institute, McMaster University." />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Introduction to Mapping in R | An Introduction to Spatial Data Analysis and Statistics: A Course in R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/cover.jpg" />
  <meta property="og:description" content="This book was created as a resource for teaching applied spatial statistics at McMaster University by Antonio Paez, with support from Anastassios Dardas, Rajveer Ubhi, Megan Coad, and Alexis Polidoro. The book is published with support of an Open Educational Resources grant from MacPherson Institute, McMaster University." />
  <meta name="github-repo" content="paezha/spatial-analysis-R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Introduction to Mapping in R | An Introduction to Spatial Data Analysis and Statistics: A Course in R" />
  
  <meta name="twitter:description" content="This book was created as a resource for teaching applied spatial statistics at McMaster University by Antonio Paez, with support from Anastassios Dardas, Rajveer Ubhi, Megan Coad, and Alexis Polidoro. The book is published with support of an Open Educational Resources grant from MacPherson Institute, McMaster University." />
  <meta name="twitter:image" content="/images/cover.jpg" />

<meta name="author" content="Antonio Paez" />


<meta name="date" content="2022-04-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basic-operations.html"/>
<link rel="next" href="activity-statistical-maps-i.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>
<script src="libs/lfx-heat-0.1.0/lfx-heat-prod.js"></script>
<script src="libs/lfx-heat-0.1.0/lfx-heat-bindings.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<link href="libs/colourpicker-1.1/colourpicker.min.css" rel="stylesheet" />
<script src="libs/colourpicker-1.1/colourpicker.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-grid-3.4.1/bootstrap-grid.min.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Spatial Analysis in R</a></li>

<li class="divider"></li>
<li><a href="index.html#section" id="toc-section"></a></li>
<li><a href="front-matter.html#front-matter" id="toc-front-matter">Front Matter<span></span></a>
<ul>
<li><a href="front-matter.html#what-is-this-book-and-who-is-it-for" id="toc-what-is-this-book-and-who-is-it-for">What is this book and who is it for?<span></span></a></li>
<li><a href="front-matter.html#allied-resources" id="toc-allied-resources">Allied resources<span></span></a></li>
<li><a href="front-matter.html#contributing" id="toc-contributing">Contributing<span></span></a>
<ul>
<li><a href="front-matter.html#license" id="toc-license"><span class="toc-section-number">0.0.1</span> License<span></span></a></li>
</ul></li>
<li><a href="front-matter.html#how-to-support-this-project" id="toc-how-to-support-this-project">How to support this project<span></span></a></li>
</ul></li>
<li><a href="preface.html#preface" id="toc-preface">Preface<span></span></a>
<ul>
<li><a href="preface.html#spatial-analysis-and-spatial-statistics" id="toc-spatial-analysis-and-spatial-statistics">Spatial Analysis and Spatial Statistics<span></span></a></li>
<li><a href="preface.html#why-this-text" id="toc-why-this-text">Why this Text?<span></span></a></li>
<li><a href="preface.html#plan" id="toc-plan">Plan<span></span></a></li>
<li><a href="preface.html#audience" id="toc-audience">Audience<span></span></a></li>
<li><a href="preface.html#requisites" id="toc-requisites">Requisites<span></span></a></li>
<li><a href="preface.html#words-of-appreciation" id="toc-words-of-appreciation">Words of Appreciation<span></span></a></li>
<li><a href="preface.html#versioning" id="toc-versioning">Versioning<span></span></a></li>
</ul></li>
<li><a href="#part-part-i-getting-to-know-the-technology" id="toc-part-part-i-getting-to-know-the-technology">(PART) Part I: Getting to Know the Technology<span></span></a></li>
<li><a href="preliminaries.html#preliminaries" id="toc-preliminaries"><span class="toc-section-number">1</span> Preliminaries: Installing <code>R</code> and RStudio<span></span></a>
<ul>
<li><a href="preliminaries.html#introduction" id="toc-introduction"><span class="toc-section-number">1.1</span> Introduction<span></span></a></li>
<li><a href="preliminaries.html#learning-objectives" id="toc-learning-objectives"><span class="toc-section-number">1.2</span> Learning Objectives<span></span></a></li>
<li><a href="preliminaries.html#r-the-open-statistical-computing-project" id="toc-r-the-open-statistical-computing-project"><span class="toc-section-number">1.3</span> <code>R</code>: The Open Statistical Computing Project<span></span></a>
<ul>
<li><a href="preliminaries.html#what-is-r" id="toc-what-is-r"><span class="toc-section-number">1.3.1</span> What is <code>R</code>?<span></span></a></li>
<li><a href="preliminaries.html#the-rstudio-ide" id="toc-the-rstudio-ide"><span class="toc-section-number">1.3.2</span> The RStudio IDE<span></span></a></li>
</ul></li>
<li><a href="preliminaries.html#packages-in-r" id="toc-packages-in-r"><span class="toc-section-number">1.4</span> Packages in R<span></span></a></li>
</ul></li>
<li><a href="basic-operations.html#basic-operations" id="toc-basic-operations"><span class="toc-section-number">2</span> Basic Operations and Data Structures in <code>R</code><span></span></a>
<ul>
<li><a href="basic-operations.html#learning-objectives-1" id="toc-learning-objectives-1"><span class="toc-section-number">2.1</span> Learning Objectives<span></span></a></li>
<li><a href="basic-operations.html#rstudio-ide" id="toc-rstudio-ide"><span class="toc-section-number">2.2</span> RStudio IDE<span></span></a></li>
<li><a href="basic-operations.html#some-basic-operations" id="toc-some-basic-operations"><span class="toc-section-number">2.3</span> Some Basic Operations<span></span></a></li>
<li><a href="basic-operations.html#data-classes-in-r" id="toc-data-classes-in-r"><span class="toc-section-number">2.4</span> Data Classes in R<span></span></a></li>
<li><a href="basic-operations.html#data-types-in-r" id="toc-data-types-in-r"><span class="toc-section-number">2.5</span> Data Types in R<span></span></a></li>
<li><a href="basic-operations.html#indexing-and-data-transformations" id="toc-indexing-and-data-transformations"><span class="toc-section-number">2.6</span> Indexing and Data Transformations<span></span></a></li>
<li><a href="basic-operations.html#visualization" id="toc-visualization"><span class="toc-section-number">2.7</span> Visualization<span></span></a></li>
<li><a href="basic-operations.html#creating-a-simple-map" id="toc-creating-a-simple-map"><span class="toc-section-number">2.8</span> Creating a Simple Map<span></span></a></li>
<li><a href="basic-operations.html#examples-of-digital-cartography-in-r" id="toc-examples-of-digital-cartography-in-r"><span class="toc-section-number">2.9</span> Examples of digital cartography in <code>R</code><span></span></a></li>
<li><a href="basic-operations.html#references" id="toc-references"><span class="toc-section-number">2.10</span> References<span></span></a></li>
</ul></li>
<li><a href="#part-part-ii-statistics-and-maps" id="toc-part-part-ii-statistics-and-maps">(PART) Part II: Statistics and Maps<span></span></a></li>
<li><a href="introduction-to-maps.html#introduction-to-maps" id="toc-introduction-to-maps"><span class="toc-section-number">3</span> Introduction to Mapping in <code>R</code><span></span></a>
<ul>
<li><a href="introduction-to-maps.html#learning-objectives-2" id="toc-learning-objectives-2"><span class="toc-section-number">3.1</span> Learning Objectives<span></span></a></li>
<li><a href="introduction-to-maps.html#suggested-readings" id="toc-suggested-readings"><span class="toc-section-number">3.2</span> Suggested Readings<span></span></a></li>
<li><a href="introduction-to-maps.html#preliminaries-1" id="toc-preliminaries-1"><span class="toc-section-number">3.3</span> Preliminaries<span></span></a></li>
<li><a href="introduction-to-maps.html#packages" id="toc-packages"><span class="toc-section-number">3.4</span> Packages<span></span></a></li>
<li><a href="introduction-to-maps.html#exploring-dataframes-and-a-simple-proportional-symbols-map" id="toc-exploring-dataframes-and-a-simple-proportional-symbols-map"><span class="toc-section-number">3.5</span> Exploring Dataframes and a Simple Proportional Symbols Map<span></span></a></li>
<li><a href="introduction-to-maps.html#improving-on-the-proportional-symbols-map" id="toc-improving-on-the-proportional-symbols-map"><span class="toc-section-number">3.6</span> Improving on the Proportional Symbols Map<span></span></a></li>
<li><a href="introduction-to-maps.html#some-simple-spatial-analysis" id="toc-some-simple-spatial-analysis"><span class="toc-section-number">3.7</span> Some Simple Spatial Analysis<span></span></a></li>
<li><a href="introduction-to-maps.html#other-resources" id="toc-other-resources"><span class="toc-section-number">3.8</span> Other Resources<span></span></a></li>
</ul></li>
<li><a href="activity-statistical-maps-i.html#activity-statistical-maps-i" id="toc-activity-statistical-maps-i"><span class="toc-section-number">4</span> Activity: Statistical Maps I<span></span></a>
<ul>
<li><a href="activity-statistical-maps-i.html#housekeeping-questions" id="toc-housekeeping-questions"><span class="toc-section-number">4.1</span> Housekeeping Questions<span></span></a></li>
<li><a href="activity-statistical-maps-i.html#learning-objectives-3" id="toc-learning-objectives-3"><span class="toc-section-number">4.2</span> Learning Objectives<span></span></a></li>
<li><a href="activity-statistical-maps-i.html#preliminaries-2" id="toc-preliminaries-2"><span class="toc-section-number">4.3</span> Preliminaries<span></span></a></li>
<li><a href="activity-statistical-maps-i.html#creating-a-simple-thematic-map" id="toc-creating-a-simple-thematic-map"><span class="toc-section-number">4.4</span> Creating a simple thematic map<span></span></a></li>
<li><a href="activity-statistical-maps-i.html#activity" id="toc-activity"><span class="toc-section-number">4.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="mapping-continued.html#mapping-continued" id="toc-mapping-continued"><span class="toc-section-number">5</span> Mapping in R: Continued<span></span></a>
<ul>
<li><a href="mapping-continued.html#learning-objectives-4" id="toc-learning-objectives-4"><span class="toc-section-number">5.1</span> Learning Objectives<span></span></a></li>
<li><a href="mapping-continued.html#suggested-readings-1" id="toc-suggested-readings-1"><span class="toc-section-number">5.2</span> Suggested Readings<span></span></a></li>
<li><a href="mapping-continued.html#preliminaries-3" id="toc-preliminaries-3"><span class="toc-section-number">5.3</span> Preliminaries<span></span></a></li>
<li><a href="mapping-continued.html#summarizing-a-dataframe" id="toc-summarizing-a-dataframe"><span class="toc-section-number">5.4</span> Summarizing a Dataframe<span></span></a></li>
<li><a href="mapping-continued.html#factors" id="toc-factors"><span class="toc-section-number">5.5</span> Factors<span></span></a></li>
<li><a href="mapping-continued.html#subsetting-data" id="toc-subsetting-data"><span class="toc-section-number">5.6</span> Subsetting Data<span></span></a></li>
<li><a href="mapping-continued.html#pipe-operator" id="toc-pipe-operator"><span class="toc-section-number">5.7</span> Pipe Operator<span></span></a></li>
<li><a href="mapping-continued.html#more-on-visualization" id="toc-more-on-visualization"><span class="toc-section-number">5.8</span> More on Visualization<span></span></a></li>
</ul></li>
<li><a href="activity-2-statistical-maps-ii.html#activity-2-statistical-maps-ii" id="toc-activity-2-statistical-maps-ii"><span class="toc-section-number">6</span> Activity 2: Statistical Maps II<span></span></a>
<ul>
<li><a href="activity-2-statistical-maps-ii.html#housekeeping-questions-1" id="toc-housekeeping-questions-1"><span class="toc-section-number">6.1</span> Housekeeping Questions<span></span></a></li>
<li><a href="activity-2-statistical-maps-ii.html#learning-objectives-5" id="toc-learning-objectives-5"><span class="toc-section-number">6.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-2-statistical-maps-ii.html#suggested-reading" id="toc-suggested-reading"><span class="toc-section-number">6.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-2-statistical-maps-ii.html#preliminaries-4" id="toc-preliminaries-4"><span class="toc-section-number">6.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-2-statistical-maps-ii.html#activity-1" id="toc-activity-1"><span class="toc-section-number">6.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="maps-as-processes.html#maps-as-processes" id="toc-maps-as-processes"><span class="toc-section-number">7</span> Maps as Processes: Null Landscapes, Spatial Processes, and Statistical Maps<span></span></a>
<ul>
<li><a href="maps-as-processes.html#learning-objectives-6" id="toc-learning-objectives-6"><span class="toc-section-number">7.1</span> Learning Objectives<span></span></a></li>
<li><a href="maps-as-processes.html#suggested-readings-2" id="toc-suggested-readings-2"><span class="toc-section-number">7.2</span> Suggested Readings<span></span></a></li>
<li><a href="maps-as-processes.html#preliminaries-5" id="toc-preliminaries-5"><span class="toc-section-number">7.3</span> Preliminaries<span></span></a></li>
<li><a href="maps-as-processes.html#random-numbers" id="toc-random-numbers"><span class="toc-section-number">7.4</span> Random Numbers<span></span></a></li>
<li><a href="maps-as-processes.html#null-landscapes" id="toc-null-landscapes"><span class="toc-section-number">7.5</span> Null Landscapes<span></span></a></li>
<li><a href="maps-as-processes.html#stochastic-processes" id="toc-stochastic-processes"><span class="toc-section-number">7.6</span> Stochastic Processes<span></span></a></li>
<li><a href="maps-as-processes.html#simulating-spatial-processes" id="toc-simulating-spatial-processes"><span class="toc-section-number">7.7</span> Simulating Spatial Processes<span></span></a></li>
<li><a href="maps-as-processes.html#processes-and-patterns" id="toc-processes-and-patterns"><span class="toc-section-number">7.8</span> Processes and Patterns<span></span></a></li>
</ul></li>
<li><a href="activity-3-maps-as-processes.html#activity-3-maps-as-processes" id="toc-activity-3-maps-as-processes"><span class="toc-section-number">8</span> Activity 3: Maps as Processes<span></span></a>
<ul>
<li><a href="activity-3-maps-as-processes.html#practice-questions" id="toc-practice-questions"><span class="toc-section-number">8.1</span> Practice Questions<span></span></a></li>
<li><a href="activity-3-maps-as-processes.html#learning-objectives-7" id="toc-learning-objectives-7"><span class="toc-section-number">8.2</span> Learning Objectives<span></span></a></li>
<li><a href="activity-3-maps-as-processes.html#suggested-reading-1" id="toc-suggested-reading-1"><span class="toc-section-number">8.3</span> Suggested Reading<span></span></a></li>
<li><a href="activity-3-maps-as-processes.html#preliminaries-6" id="toc-preliminaries-6"><span class="toc-section-number">8.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-3-maps-as-processes.html#activity-2" id="toc-activity-2"><span class="toc-section-number">8.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="#part-part-iii-analysis-of-point-patterns" id="toc-part-part-iii-analysis-of-point-patterns">(PART) Part III: Analysis of Point Patterns<span></span></a></li>
<li><a href="point-pattern-analysis-i.html#point-pattern-analysis-i" id="toc-point-pattern-analysis-i"><span class="toc-section-number">9</span> Point Pattern Analysis I<span></span></a>
<ul>
<li><a href="point-pattern-analysis-i.html#learning-objectives-8" id="toc-learning-objectives-8"><span class="toc-section-number">9.1</span> Learning Objectives<span></span></a></li>
<li><a href="point-pattern-analysis-i.html#suggested-readings-3" id="toc-suggested-readings-3"><span class="toc-section-number">9.2</span> Suggested Readings<span></span></a></li>
<li><a href="point-pattern-analysis-i.html#preliminaries-7" id="toc-preliminaries-7"><span class="toc-section-number">9.3</span> Preliminaries<span></span></a></li>
<li><a href="point-pattern-analysis-i.html#point-patterns" id="toc-point-patterns"><span class="toc-section-number">9.4</span> Point Patterns<span></span></a></li>
<li><a href="point-pattern-analysis-i.html#processes-and-point-patterns" id="toc-processes-and-point-patterns"><span class="toc-section-number">9.5</span> Processes and Point Patterns<span></span></a></li>
<li><a href="point-pattern-analysis-i.html#intensity-and-density" id="toc-intensity-and-density"><span class="toc-section-number">9.6</span> Intensity and Density<span></span></a></li>
<li><a href="point-pattern-analysis-i.html#quadrats-and-density-maps" id="toc-quadrats-and-density-maps"><span class="toc-section-number">9.7</span> Quadrats and Density Maps<span></span></a></li>
<li><a href="point-pattern-analysis-i.html#defining-the-region-for-analysis" id="toc-defining-the-region-for-analysis"><span class="toc-section-number">9.8</span> Defining the Region for Analysis<span></span></a></li>
</ul></li>
<li><a href="activity-4-point-pattern-analysis-i.html#activity-4-point-pattern-analysis-i" id="toc-activity-4-point-pattern-analysis-i"><span class="toc-section-number">10</span> Activity 4: Point Pattern Analysis I<span></span></a>
<ul>
<li><a href="activity-4-point-pattern-analysis-i.html#practice-questions-1" id="toc-practice-questions-1"><span class="toc-section-number">10.1</span> Practice questions<span></span></a></li>
<li><a href="activity-4-point-pattern-analysis-i.html#learning-objectives-9" id="toc-learning-objectives-9"><span class="toc-section-number">10.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-4-point-pattern-analysis-i.html#suggested-reading-2" id="toc-suggested-reading-2"><span class="toc-section-number">10.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-4-point-pattern-analysis-i.html#preliminaries-8" id="toc-preliminaries-8"><span class="toc-section-number">10.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-4-point-pattern-analysis-i.html#activity-3" id="toc-activity-3"><span class="toc-section-number">10.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="point-patern-analysis-ii.html#point-patern-analysis-ii" id="toc-point-patern-analysis-ii"><span class="toc-section-number">11</span> Point Pattern Analysis II<span></span></a>
<ul>
<li><a href="point-patern-analysis-ii.html#learning-objectives-10" id="toc-learning-objectives-10"><span class="toc-section-number">11.1</span> Learning Objectives<span></span></a></li>
<li><a href="point-patern-analysis-ii.html#suggested-readings-4" id="toc-suggested-readings-4"><span class="toc-section-number">11.2</span> Suggested Readings<span></span></a></li>
<li><a href="point-patern-analysis-ii.html#preliminaries-9" id="toc-preliminaries-9"><span class="toc-section-number">11.3</span> Preliminaries<span></span></a></li>
<li><a href="point-patern-analysis-ii.html#a-quadrat-based-test-for-spatial-independence" id="toc-a-quadrat-based-test-for-spatial-independence"><span class="toc-section-number">11.4</span> A Quadrat-based Test for Spatial Independence<span></span></a></li>
<li><a href="point-patern-analysis-ii.html#limitations-of-quadrat-analysis-size-and-number-of-quadrats" id="toc-limitations-of-quadrat-analysis-size-and-number-of-quadrats"><span class="toc-section-number">11.5</span> Limitations of Quadrat Analysis: Size and Number of Quadrats<span></span></a></li>
<li><a href="point-patern-analysis-ii.html#limitations-of-quadrat-analysis-relative-position-of-events" id="toc-limitations-of-quadrat-analysis-relative-position-of-events"><span class="toc-section-number">11.6</span> Limitations of Quadrat Analysis: Relative Position of Events<span></span></a></li>
<li><a href="point-patern-analysis-ii.html#kernel-density" id="toc-kernel-density"><span class="toc-section-number">11.7</span> Kernel Density<span></span></a></li>
</ul></li>
<li><a href="activity-5-point-pattern-analysis-ii.html#activity-5-point-pattern-analysis-ii" id="toc-activity-5-point-pattern-analysis-ii"><span class="toc-section-number">12</span> Activity 5: Point Pattern Analysis II<span></span></a>
<ul>
<li><a href="activity-5-point-pattern-analysis-ii.html#practice-questions-2" id="toc-practice-questions-2"><span class="toc-section-number">12.1</span> Practice questions<span></span></a></li>
<li><a href="activity-5-point-pattern-analysis-ii.html#learning-objectives-11" id="toc-learning-objectives-11"><span class="toc-section-number">12.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-5-point-pattern-analysis-ii.html#suggested-reading-3" id="toc-suggested-reading-3"><span class="toc-section-number">12.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-5-point-pattern-analysis-ii.html#preliminaries-10" id="toc-preliminaries-10"><span class="toc-section-number">12.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-5-point-pattern-analysis-ii.html#activity-4" id="toc-activity-4"><span class="toc-section-number">12.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="point-pattern-analysis-iii.html#point-pattern-analysis-iii" id="toc-point-pattern-analysis-iii"><span class="toc-section-number">13</span> Point Pattern Analysis III<span></span></a>
<ul>
<li><a href="point-pattern-analysis-iii.html#learning-objectives-12" id="toc-learning-objectives-12"><span class="toc-section-number">13.1</span> Learning Objectives<span></span></a></li>
<li><a href="point-pattern-analysis-iii.html#suggested-readings-5" id="toc-suggested-readings-5"><span class="toc-section-number">13.2</span> Suggested Readings<span></span></a></li>
<li><a href="point-pattern-analysis-iii.html#preliminaries-11" id="toc-preliminaries-11"><span class="toc-section-number">13.3</span> Preliminaries<span></span></a></li>
<li><a href="point-pattern-analysis-iii.html#motivation" id="toc-motivation"><span class="toc-section-number">13.4</span> Motivation<span></span></a></li>
<li><a href="point-pattern-analysis-iii.html#nearest-neighbors" id="toc-nearest-neighbors"><span class="toc-section-number">13.5</span> Nearest Neighbors<span></span></a></li>
<li><a href="point-pattern-analysis-iii.html#g-function" id="toc-g-function"><span class="toc-section-number">13.6</span> <span class="math inline">\(G\)</span>-function<span></span></a></li>
</ul></li>
<li><a href="activity-6-point-pattern-analysis-iii.html#activity-6-point-pattern-analysis-iii" id="toc-activity-6-point-pattern-analysis-iii"><span class="toc-section-number">14</span> Activity 6: Point Pattern Analysis III<span></span></a>
<ul>
<li><a href="activity-6-point-pattern-analysis-iii.html#practice-questions-3" id="toc-practice-questions-3"><span class="toc-section-number">14.1</span> Practice questions<span></span></a></li>
<li><a href="activity-6-point-pattern-analysis-iii.html#learning-objectives-13" id="toc-learning-objectives-13"><span class="toc-section-number">14.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-6-point-pattern-analysis-iii.html#suggested-reading-4" id="toc-suggested-reading-4"><span class="toc-section-number">14.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-6-point-pattern-analysis-iii.html#preliminaries-12" id="toc-preliminaries-12"><span class="toc-section-number">14.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-6-point-pattern-analysis-iii.html#activity-5" id="toc-activity-5"><span class="toc-section-number">14.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="point-pattern-analysis-iv.html#point-pattern-analysis-iv" id="toc-point-pattern-analysis-iv"><span class="toc-section-number">15</span> Point Pattern Analysis IV<span></span></a>
<ul>
<li><a href="point-pattern-analysis-iv.html#learning-objectives-14" id="toc-learning-objectives-14"><span class="toc-section-number">15.1</span> Learning Objectives<span></span></a></li>
<li><a href="point-pattern-analysis-iv.html#suggested-readings-6" id="toc-suggested-readings-6"><span class="toc-section-number">15.2</span> Suggested Readings<span></span></a></li>
<li><a href="point-pattern-analysis-iv.html#preliminaries-13" id="toc-preliminaries-13"><span class="toc-section-number">15.3</span> Preliminaries<span></span></a></li>
<li><a href="point-pattern-analysis-iv.html#motivation-1" id="toc-motivation-1"><span class="toc-section-number">15.4</span> Motivation<span></span></a></li>
<li><a href="point-pattern-analysis-iv.html#f-function" id="toc-f-function"><span class="toc-section-number">15.5</span> F-function<span></span></a></li>
<li><a href="point-pattern-analysis-iv.html#hatk-function" id="toc-hatk-function"><span class="toc-section-number">15.6</span> <span class="math inline">\(\hat{K}\)</span>-function<span></span></a></li>
</ul></li>
<li><a href="activity-7-point-pattern-analysis-iv.html#activity-7-point-pattern-analysis-iv" id="toc-activity-7-point-pattern-analysis-iv"><span class="toc-section-number">16</span> Activity 7: Point Pattern Analysis IV<span></span></a>
<ul>
<li><a href="activity-7-point-pattern-analysis-iv.html#practice-questions-4" id="toc-practice-questions-4"><span class="toc-section-number">16.1</span> Practice questions<span></span></a></li>
<li><a href="activity-7-point-pattern-analysis-iv.html#learning-objectives-15" id="toc-learning-objectives-15"><span class="toc-section-number">16.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-7-point-pattern-analysis-iv.html#suggested-reading-5" id="toc-suggested-reading-5"><span class="toc-section-number">16.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-7-point-pattern-analysis-iv.html#preliminaries-14" id="toc-preliminaries-14"><span class="toc-section-number">16.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-7-point-pattern-analysis-iv.html#activity-6" id="toc-activity-6"><span class="toc-section-number">16.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="point-pattern-analysis-v.html#point-pattern-analysis-v" id="toc-point-pattern-analysis-v"><span class="toc-section-number">17</span> Point Pattern Analysis V<span></span></a>
<ul>
<li><a href="point-pattern-analysis-v.html#learning-objectives-16" id="toc-learning-objectives-16"><span class="toc-section-number">17.1</span> Learning Objectives<span></span></a></li>
<li><a href="point-pattern-analysis-v.html#suggested-readings-7" id="toc-suggested-readings-7"><span class="toc-section-number">17.2</span> Suggested Readings<span></span></a></li>
<li><a href="point-pattern-analysis-v.html#preliminaries-15" id="toc-preliminaries-15"><span class="toc-section-number">17.3</span> Preliminaries<span></span></a></li>
<li><a href="point-pattern-analysis-v.html#motivation-hypothesis-testing" id="toc-motivation-hypothesis-testing"><span class="toc-section-number">17.4</span> Motivation: Hypothesis Testing<span></span></a></li>
<li><a href="point-pattern-analysis-v.html#null-landscapes-revisited" id="toc-null-landscapes-revisited"><span class="toc-section-number">17.5</span> Null Landscapes Revisited<span></span></a></li>
<li><a href="point-pattern-analysis-v.html#simulation-envelopes" id="toc-simulation-envelopes"><span class="toc-section-number">17.6</span> Simulation Envelopes<span></span></a></li>
<li><a href="point-pattern-analysis-v.html#things-to-keep-in-mind" id="toc-things-to-keep-in-mind"><span class="toc-section-number">17.7</span> Things to Keep in Mind!<span></span></a>
<ul>
<li><a href="point-pattern-analysis-v.html#definition-of-a-region" id="toc-definition-of-a-region"><span class="toc-section-number">17.7.1</span> Definition of a Region<span></span></a></li>
<li><a href="point-pattern-analysis-v.html#edge-effects" id="toc-edge-effects"><span class="toc-section-number">17.7.2</span> Edge Effects<span></span></a></li>
<li><a href="point-pattern-analysis-v.html#sampled-point-patterns" id="toc-sampled-point-patterns"><span class="toc-section-number">17.7.3</span> Sampled Point Patterns<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="activity-8-point-pattern-analysis-v.html#activity-8-point-pattern-analysis-v" id="toc-activity-8-point-pattern-analysis-v"><span class="toc-section-number">18</span> Activity 8: Point Pattern Analysis V<span></span></a>
<ul>
<li><a href="activity-8-point-pattern-analysis-v.html#practice-questions-5" id="toc-practice-questions-5"><span class="toc-section-number">18.1</span> Practice questions<span></span></a></li>
<li><a href="activity-8-point-pattern-analysis-v.html#learning-objectives-17" id="toc-learning-objectives-17"><span class="toc-section-number">18.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-8-point-pattern-analysis-v.html#suggested-reading-6" id="toc-suggested-reading-6"><span class="toc-section-number">18.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-8-point-pattern-analysis-v.html#preliminaries-16" id="toc-preliminaries-16"><span class="toc-section-number">18.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-8-point-pattern-analysis-v.html#activity-7" id="toc-activity-7"><span class="toc-section-number">18.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="#part-part-iv-data-in-areal-units" id="toc-part-part-iv-data-in-areal-units">(PART) Part IV: Data in Areal Units<span></span></a></li>
<li><a href="area-data-i.html#area-data-i" id="toc-area-data-i"><span class="toc-section-number">19</span> Area Data I<span></span></a>
<ul>
<li><a href="area-data-i.html#learning-objectives-18" id="toc-learning-objectives-18"><span class="toc-section-number">19.1</span> Learning Objectives<span></span></a></li>
<li><a href="area-data-i.html#suggested-readings-8" id="toc-suggested-readings-8"><span class="toc-section-number">19.2</span> Suggested Readings<span></span></a></li>
<li><a href="area-data-i.html#preliminaries-17" id="toc-preliminaries-17"><span class="toc-section-number">19.3</span> Preliminaries<span></span></a></li>
<li><a href="area-data-i.html#area-data" id="toc-area-data"><span class="toc-section-number">19.4</span> Area Data<span></span></a></li>
<li><a href="area-data-i.html#processes-and-area-data" id="toc-processes-and-area-data"><span class="toc-section-number">19.5</span> Processes and Area Data<span></span></a></li>
<li><a href="area-data-i.html#visualizing-area-data-choropleth-maps" id="toc-visualizing-area-data-choropleth-maps"><span class="toc-section-number">19.6</span> Visualizing Area Data: Choropleth Maps<span></span></a></li>
<li><a href="area-data-i.html#visualizing-area-data-cartograms" id="toc-visualizing-area-data-cartograms"><span class="toc-section-number">19.7</span> Visualizing Area Data: Cartograms<span></span></a></li>
</ul></li>
<li><a href="activity-9-area-data-i.html#activity-9-area-data-i" id="toc-activity-9-area-data-i"><span class="toc-section-number">20</span> Activity 9: Area Data I<span></span></a>
<ul>
<li><a href="activity-9-area-data-i.html#practice-questions-6" id="toc-practice-questions-6"><span class="toc-section-number">20.1</span> Practice questions<span></span></a></li>
<li><a href="activity-9-area-data-i.html#learning-objectives-19" id="toc-learning-objectives-19"><span class="toc-section-number">20.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-9-area-data-i.html#suggested-reading-7" id="toc-suggested-reading-7"><span class="toc-section-number">20.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-9-area-data-i.html#preliminaries-18" id="toc-preliminaries-18"><span class="toc-section-number">20.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-9-area-data-i.html#activity-8" id="toc-activity-8"><span class="toc-section-number">20.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="area-data-ii.html#area-data-ii" id="toc-area-data-ii"><span class="toc-section-number">21</span> Area Data II<span></span></a>
<ul>
<li><a href="area-data-ii.html#learning-objectives-20" id="toc-learning-objectives-20"><span class="toc-section-number">21.1</span> Learning Objectives<span></span></a></li>
<li><a href="area-data-ii.html#suggested-readings-9" id="toc-suggested-readings-9"><span class="toc-section-number">21.2</span> Suggested Readings<span></span></a></li>
<li><a href="area-data-ii.html#preliminaries-19" id="toc-preliminaries-19"><span class="toc-section-number">21.3</span> Preliminaries<span></span></a></li>
<li><a href="area-data-ii.html#proximity-in-area-data" id="toc-proximity-in-area-data"><span class="toc-section-number">21.4</span> Proximity in Area Data<span></span></a></li>
<li><a href="area-data-ii.html#spatial-weights-matrices" id="toc-spatial-weights-matrices"><span class="toc-section-number">21.5</span> Spatial Weights Matrices<span></span></a></li>
<li><a href="area-data-ii.html#creating-spatial-weights-matrices-in-r" id="toc-creating-spatial-weights-matrices-in-r"><span class="toc-section-number">21.6</span> Creating Spatial Weights Matrices in <code>R</code><span></span></a></li>
<li><a href="area-data-ii.html#spatial-moving-averages" id="toc-spatial-moving-averages"><span class="toc-section-number">21.7</span> Spatial Moving Averages<span></span></a></li>
<li><a href="area-data-ii.html#other-criteria-for-coding-proximity" id="toc-other-criteria-for-coding-proximity"><span class="toc-section-number">21.8</span> Other Criteria for Coding Proximity<span></span></a></li>
</ul></li>
<li><a href="activity-10-area-data-ii.html#activity-10-area-data-ii" id="toc-activity-10-area-data-ii"><span class="toc-section-number">22</span> Activity 10: Area Data II<span></span></a>
<ul>
<li><a href="activity-10-area-data-ii.html#practice-questions-7" id="toc-practice-questions-7"><span class="toc-section-number">22.1</span> Practice questions<span></span></a></li>
<li><a href="activity-10-area-data-ii.html#learning-objectives-21" id="toc-learning-objectives-21"><span class="toc-section-number">22.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-10-area-data-ii.html#suggested-reading-8" id="toc-suggested-reading-8"><span class="toc-section-number">22.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-10-area-data-ii.html#preliminaries-20" id="toc-preliminaries-20"><span class="toc-section-number">22.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-10-area-data-ii.html#activity-9" id="toc-activity-9"><span class="toc-section-number">22.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="area-data-iii.html#area-data-iii" id="toc-area-data-iii"><span class="toc-section-number">23</span> Area Data III<span></span></a>
<ul>
<li><a href="area-data-iii.html#learning-objectives-22" id="toc-learning-objectives-22"><span class="toc-section-number">23.1</span> Learning Objectives<span></span></a></li>
<li><a href="area-data-iii.html#suggested-readings-10" id="toc-suggested-readings-10"><span class="toc-section-number">23.2</span> Suggested Readings<span></span></a></li>
<li><a href="area-data-iii.html#preliminaries-21" id="toc-preliminaries-21"><span class="toc-section-number">23.3</span> Preliminaries<span></span></a></li>
<li><a href="area-data-iii.html#spatial-moving-averages-and-simulation" id="toc-spatial-moving-averages-and-simulation"><span class="toc-section-number">23.4</span> Spatial Moving Averages and Simulation<span></span></a></li>
<li><a href="area-data-iii.html#the-spatial-moving-average-as-a-smoother" id="toc-the-spatial-moving-average-as-a-smoother"><span class="toc-section-number">23.5</span> The Spatial Moving Average as a Smoother<span></span></a></li>
<li><a href="area-data-iii.html#spatial-moving-average-scatterplots" id="toc-spatial-moving-average-scatterplots"><span class="toc-section-number">23.6</span> Spatial Moving Average Scatterplots<span></span></a></li>
<li><a href="area-data-iii.html#spatial-autocorrelation-and-morans-i-coefficient" id="toc-spatial-autocorrelation-and-morans-i-coefficient"><span class="toc-section-number">23.7</span> Spatial Autocorrelation and Moran’s <span class="math inline">\(I\)</span> coefficient<span></span></a></li>
<li><a href="area-data-iii.html#morans-i-and-morans-scatterplot" id="toc-morans-i-and-morans-scatterplot"><span class="toc-section-number">23.8</span> Moran’s <span class="math inline">\(I\)</span> and Moran’s Scatterplot<span></span></a></li>
<li><a href="area-data-iii.html#hypothesis-testing-for-spatial-autocorrelation" id="toc-hypothesis-testing-for-spatial-autocorrelation"><span class="toc-section-number">23.9</span> Hypothesis Testing for Spatial Autocorrelation<span></span></a></li>
</ul></li>
<li><a href="activity-11-area-data-iii.html#activity-11-area-data-iii" id="toc-activity-11-area-data-iii"><span class="toc-section-number">24</span> Activity 11: Area Data III<span></span></a>
<ul>
<li><a href="activity-11-area-data-iii.html#practice-questions-8" id="toc-practice-questions-8"><span class="toc-section-number">24.1</span> Practice questions<span></span></a></li>
<li><a href="activity-11-area-data-iii.html#learning-objectives-23" id="toc-learning-objectives-23"><span class="toc-section-number">24.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-11-area-data-iii.html#suggested-reading-9" id="toc-suggested-reading-9"><span class="toc-section-number">24.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-11-area-data-iii.html#preliminaries-22" id="toc-preliminaries-22"><span class="toc-section-number">24.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-11-area-data-iii.html#activity-10" id="toc-activity-10"><span class="toc-section-number">24.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="area-data-iv.html#area-data-iv" id="toc-area-data-iv"><span class="toc-section-number">25</span> Area Data IV<span></span></a>
<ul>
<li><a href="area-data-iv.html#learning-objectives-24" id="toc-learning-objectives-24"><span class="toc-section-number">25.1</span> Learning objectives<span></span></a></li>
<li><a href="area-data-iv.html#suggested-readings-11" id="toc-suggested-readings-11"><span class="toc-section-number">25.2</span> Suggested readings<span></span></a></li>
<li><a href="area-data-iv.html#preliminaries-23" id="toc-preliminaries-23"><span class="toc-section-number">25.3</span> Preliminaries<span></span></a></li>
<li><a href="area-data-iv.html#decomposing-morans-i" id="toc-decomposing-morans-i"><span class="toc-section-number">25.4</span> Decomposing Moran’s <span class="math inline">\(I\)</span><span></span></a></li>
<li><a href="area-data-iv.html#local-morans-i-and-mapping" id="toc-local-morans-i-and-mapping"><span class="toc-section-number">25.5</span> Local Moran’s <span class="math inline">\(I\)</span> and Mapping<span></span></a></li>
<li><a href="area-data-iv.html#a-quick-note-on-functions" id="toc-a-quick-note-on-functions"><span class="toc-section-number">25.6</span> A Quick Note on Functions<span></span></a></li>
<li><a href="area-data-iv.html#a-concentration-approach-for-local-analysis-of-spatial-association" id="toc-a-concentration-approach-for-local-analysis-of-spatial-association"><span class="toc-section-number">25.7</span> A Concentration approach for Local Analysis of Spatial Association<span></span></a></li>
<li><a href="area-data-iv.html#a-short-note-on-hypothesis-testing" id="toc-a-short-note-on-hypothesis-testing"><span class="toc-section-number">25.8</span> A Short Note on Hypothesis Testing<span></span></a></li>
<li><a href="area-data-iv.html#detection-of-hot-and-cold-spots" id="toc-detection-of-hot-and-cold-spots"><span class="toc-section-number">25.9</span> Detection of Hot and Cold Spots<span></span></a></li>
<li><a href="area-data-iv.html#other-resources-1" id="toc-other-resources-1"><span class="toc-section-number">25.10</span> Other Resources<span></span></a></li>
</ul></li>
<li><a href="activity-12-area-data-iv.html#activity-12-area-data-iv" id="toc-activity-12-area-data-iv"><span class="toc-section-number">26</span> Activity 12: Area Data IV<span></span></a>
<ul>
<li><a href="activity-12-area-data-iv.html#practice-questions-9" id="toc-practice-questions-9"><span class="toc-section-number">26.1</span> Practice questions<span></span></a></li>
<li><a href="activity-12-area-data-iv.html#learning-objectives-25" id="toc-learning-objectives-25"><span class="toc-section-number">26.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-12-area-data-iv.html#suggested-reading-10" id="toc-suggested-reading-10"><span class="toc-section-number">26.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-12-area-data-iv.html#preliminaries-24" id="toc-preliminaries-24"><span class="toc-section-number">26.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-12-area-data-iv.html#activity-11" id="toc-activity-11"><span class="toc-section-number">26.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="area-data-v.html#area-data-v" id="toc-area-data-v"><span class="toc-section-number">27</span> Area Data V<span></span></a>
<ul>
<li><a href="area-data-v.html#learning-objectives-26" id="toc-learning-objectives-26"><span class="toc-section-number">27.1</span> Learning Objectives<span></span></a></li>
<li><a href="area-data-v.html#suggested-readings-12" id="toc-suggested-readings-12"><span class="toc-section-number">27.2</span> Suggested Readings<span></span></a></li>
<li><a href="area-data-v.html#preliminaries-25" id="toc-preliminaries-25"><span class="toc-section-number">27.3</span> Preliminaries<span></span></a></li>
<li><a href="area-data-v.html#regression-analysis-in-r" id="toc-regression-analysis-in-r"><span class="toc-section-number">27.4</span> Regression Analysis in <code>R</code><span></span></a></li>
<li><a href="area-data-v.html#autocorrelation-as-a-model-diagnostic" id="toc-autocorrelation-as-a-model-diagnostic"><span class="toc-section-number">27.5</span> Autocorrelation as a Model Diagnostic<span></span></a></li>
<li><a href="area-data-v.html#variable-transformations" id="toc-variable-transformations"><span class="toc-section-number">27.6</span> Variable Transformations<span></span></a></li>
<li><a href="area-data-v.html#a-note-about-spatial-autocorrelation-in-regression-analysis" id="toc-a-note-about-spatial-autocorrelation-in-regression-analysis"><span class="toc-section-number">27.7</span> A Note about Spatial Autocorrelation in Regression Analysis<span></span></a></li>
</ul></li>
<li><a href="activity-13-area-data-v.html#activity-13-area-data-v" id="toc-activity-13-area-data-v"><span class="toc-section-number">28</span> Activity 13: Area Data V<span></span></a>
<ul>
<li><a href="activity-13-area-data-v.html#practice-questions-10" id="toc-practice-questions-10"><span class="toc-section-number">28.1</span> Practice questions<span></span></a></li>
<li><a href="activity-13-area-data-v.html#learning-objectives-27" id="toc-learning-objectives-27"><span class="toc-section-number">28.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-13-area-data-v.html#suggested-reading-11" id="toc-suggested-reading-11"><span class="toc-section-number">28.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-13-area-data-v.html#preliminaries-26" id="toc-preliminaries-26"><span class="toc-section-number">28.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-13-area-data-v.html#activity-12" id="toc-activity-12"><span class="toc-section-number">28.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="area-data-vi.html#area-data-vi" id="toc-area-data-vi"><span class="toc-section-number">29</span> Area Data VI<span></span></a>
<ul>
<li><a href="area-data-vi.html#learning-objectives-28" id="toc-learning-objectives-28"><span class="toc-section-number">29.1</span> Learning Objectives<span></span></a></li>
<li><a href="area-data-vi.html#suggested-readings-13" id="toc-suggested-readings-13"><span class="toc-section-number">29.2</span> Suggested Readings<span></span></a></li>
<li><a href="area-data-vi.html#preliminaries-27" id="toc-preliminaries-27"><span class="toc-section-number">29.3</span> Preliminaries<span></span></a></li>
<li><a href="area-data-vi.html#residual-spatial-autocorrelation-revisited" id="toc-residual-spatial-autocorrelation-revisited"><span class="toc-section-number">29.4</span> Residual spatial autocorrelation revisited<span></span></a>
<ul>
<li><a href="area-data-vi.html#incorrect-functional-form" id="toc-incorrect-functional-form"><span class="toc-section-number">29.4.1</span> Incorrect Functional Form<span></span></a></li>
<li><a href="area-data-vi.html#omitted-variables" id="toc-omitted-variables"><span class="toc-section-number">29.4.2</span> Omitted Variables<span></span></a></li>
</ul></li>
<li><a href="area-data-vi.html#remedial-action" id="toc-remedial-action"><span class="toc-section-number">29.5</span> Remedial Action<span></span></a></li>
<li><a href="area-data-vi.html#flexible-functional-forms-and-models-with-spatially-varying-coefficients" id="toc-flexible-functional-forms-and-models-with-spatially-varying-coefficients"><span class="toc-section-number">29.6</span> Flexible Functional Forms and Models with Spatially-varying Coefficients<span></span></a>
<ul>
<li><a href="area-data-vi.html#trend-surface-analysis" id="toc-trend-surface-analysis"><span class="toc-section-number">29.6.1</span> Trend Surface Analysis<span></span></a></li>
<li><a href="area-data-vi.html#models-with-spatially-varying-coefficients" id="toc-models-with-spatially-varying-coefficients"><span class="toc-section-number">29.6.2</span> Models with Spatially-varying Coefficients<span></span></a></li>
</ul></li>
<li><a href="area-data-vi.html#spatial-error-model-sem" id="toc-spatial-error-model-sem"><span class="toc-section-number">29.7</span> Spatial Error Model (SEM)<span></span></a></li>
</ul></li>
<li><a href="activity-14-area-data-vi.html#activity-14-area-data-vi" id="toc-activity-14-area-data-vi"><span class="toc-section-number">30</span> Activity 14: Area Data VI<span></span></a>
<ul>
<li><a href="activity-14-area-data-vi.html#practice-questions-11" id="toc-practice-questions-11"><span class="toc-section-number">30.1</span> Practice questions<span></span></a></li>
<li><a href="activity-14-area-data-vi.html#learning-objectives-29" id="toc-learning-objectives-29"><span class="toc-section-number">30.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-14-area-data-vi.html#suggested-reading-12" id="toc-suggested-reading-12"><span class="toc-section-number">30.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-14-area-data-vi.html#preliminaries-28" id="toc-preliminaries-28"><span class="toc-section-number">30.4</span> Preliminaries<span></span></a>
<ul>
<li><a href="activity-14-area-data-vi.html#new-york-leukemia-data" id="toc-new-york-leukemia-data"><span class="toc-section-number">30.4.1</span> New York leukemia data<span></span></a></li>
<li><a href="activity-14-area-data-vi.html#pennsylvania-lung-cancer" id="toc-pennsylvania-lung-cancer"><span class="toc-section-number">30.4.2</span> Pennsylvania lung cancer<span></span></a></li>
</ul></li>
<li><a href="activity-14-area-data-vi.html#activity-13" id="toc-activity-13"><span class="toc-section-number">30.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="#part-part-v-analysis-and-prediction-of-fields" id="toc-part-part-v-analysis-and-prediction-of-fields">(PART) Part V: Analysis and Prediction of Fields<span></span></a></li>
<li><a href="spatially-continuous-data-i.html#spatially-continuous-data-i" id="toc-spatially-continuous-data-i"><span class="toc-section-number">31</span> Spatially Continuous Data I<span></span></a>
<ul>
<li><a href="spatially-continuous-data-i.html#learning-objectives-30" id="toc-learning-objectives-30"><span class="toc-section-number">31.1</span> Learning objectives<span></span></a></li>
<li><a href="spatially-continuous-data-i.html#suggested-readings-14" id="toc-suggested-readings-14"><span class="toc-section-number">31.2</span> Suggested readings<span></span></a></li>
<li><a href="spatially-continuous-data-i.html#preliminaries-29" id="toc-preliminaries-29"><span class="toc-section-number">31.3</span> Preliminaries<span></span></a></li>
<li><a href="spatially-continuous-data-i.html#spatially-continuous-field-data" id="toc-spatially-continuous-field-data"><span class="toc-section-number">31.4</span> Spatially continuous (field) data<span></span></a></li>
<li><a href="spatially-continuous-data-i.html#exploratory-visualization" id="toc-exploratory-visualization"><span class="toc-section-number">31.5</span> Exploratory visualization<span></span></a></li>
<li><a href="spatially-continuous-data-i.html#tile-based-methods" id="toc-tile-based-methods"><span class="toc-section-number">31.6</span> Tile-based methods<span></span></a></li>
<li><a href="spatially-continuous-data-i.html#inverse-distance-weighting-idw" id="toc-inverse-distance-weighting-idw"><span class="toc-section-number">31.7</span> Inverse distance weighting (IDW)<span></span></a></li>
<li><a href="spatially-continuous-data-i.html#k-point-means" id="toc-k-point-means"><span class="toc-section-number">31.8</span> <span class="math inline">\(k\)</span>-point means<span></span></a></li>
</ul></li>
<li><a href="activity-15-spatially-continuous-data-i.html#activity-15-spatially-continuous-data-i" id="toc-activity-15-spatially-continuous-data-i"><span class="toc-section-number">32</span> Activity 15: Spatially Continuous Data I<span></span></a>
<ul>
<li><a href="activity-15-spatially-continuous-data-i.html#practice-questions-12" id="toc-practice-questions-12"><span class="toc-section-number">32.1</span> Practice questions<span></span></a></li>
<li><a href="activity-15-spatially-continuous-data-i.html#learning-objectives-31" id="toc-learning-objectives-31"><span class="toc-section-number">32.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-15-spatially-continuous-data-i.html#suggested-reading-13" id="toc-suggested-reading-13"><span class="toc-section-number">32.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-15-spatially-continuous-data-i.html#preliminaries-30" id="toc-preliminaries-30"><span class="toc-section-number">32.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-15-spatially-continuous-data-i.html#activity-14" id="toc-activity-14"><span class="toc-section-number">32.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="spatially-continuous-data-ii.html#spatially-continuous-data-ii" id="toc-spatially-continuous-data-ii"><span class="toc-section-number">33</span> Spatially Continuous Data II<span></span></a>
<ul>
<li><a href="spatially-continuous-data-ii.html#learning-objectives-32" id="toc-learning-objectives-32"><span class="toc-section-number">33.1</span> Learning objectives<span></span></a></li>
<li><a href="spatially-continuous-data-ii.html#suggested-readings-15" id="toc-suggested-readings-15"><span class="toc-section-number">33.2</span> Suggested readings<span></span></a></li>
<li><a href="spatially-continuous-data-ii.html#preliminaries-31" id="toc-preliminaries-31"><span class="toc-section-number">33.3</span> Preliminaries<span></span></a></li>
<li><a href="spatially-continuous-data-ii.html#uncertainty-in-the-predictions" id="toc-uncertainty-in-the-predictions"><span class="toc-section-number">33.4</span> Uncertainty in the predictions<span></span></a></li>
<li><a href="spatially-continuous-data-ii.html#trend-surface-analysis-1" id="toc-trend-surface-analysis-1"><span class="toc-section-number">33.5</span> Trend surface analysis<span></span></a></li>
<li><a href="spatially-continuous-data-ii.html#accuracy-and-precision" id="toc-accuracy-and-precision"><span class="toc-section-number">33.6</span> Accuracy and precision<span></span></a></li>
</ul></li>
<li><a href="activity-16-spatially-continuous-data-ii.html#activity-16-spatially-continuous-data-ii" id="toc-activity-16-spatially-continuous-data-ii"><span class="toc-section-number">34</span> Activity 16: Spatially Continuous Data II<span></span></a>
<ul>
<li><a href="activity-16-spatially-continuous-data-ii.html#practice-questions-13" id="toc-practice-questions-13"><span class="toc-section-number">34.1</span> Practice questions<span></span></a></li>
<li><a href="activity-16-spatially-continuous-data-ii.html#learning-objectives-33" id="toc-learning-objectives-33"><span class="toc-section-number">34.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-16-spatially-continuous-data-ii.html#suggested-reading-14" id="toc-suggested-reading-14"><span class="toc-section-number">34.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-16-spatially-continuous-data-ii.html#preliminaries-32" id="toc-preliminaries-32"><span class="toc-section-number">34.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-16-spatially-continuous-data-ii.html#activity-15" id="toc-activity-15"><span class="toc-section-number">34.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="spatially-continuous-data-iii.html#spatially-continuous-data-iii" id="toc-spatially-continuous-data-iii"><span class="toc-section-number">35</span> Spatially Continuous Data III<span></span></a>
<ul>
<li><a href="spatially-continuous-data-iii.html#learning-objectives-34" id="toc-learning-objectives-34"><span class="toc-section-number">35.1</span> Learning objectives<span></span></a></li>
<li><a href="spatially-continuous-data-iii.html#suggested-reading-15" id="toc-suggested-reading-15"><span class="toc-section-number">35.2</span> Suggested reading<span></span></a></li>
<li><a href="spatially-continuous-data-iii.html#preliminaries-33" id="toc-preliminaries-33"><span class="toc-section-number">35.3</span> Preliminaries<span></span></a></li>
<li><a href="spatially-continuous-data-iii.html#residual-spatial-pattern" id="toc-residual-spatial-pattern"><span class="toc-section-number">35.4</span> Residual spatial pattern<span></span></a></li>
<li><a href="spatially-continuous-data-iii.html#measuring-spatial-dependence-in-spatially-continuous-data" id="toc-measuring-spatial-dependence-in-spatially-continuous-data"><span class="toc-section-number">35.5</span> Measuring spatial dependence in spatially continuous data<span></span></a></li>
<li><a href="spatially-continuous-data-iii.html#variographic-analyisis" id="toc-variographic-analyisis"><span class="toc-section-number">35.6</span> Variographic analyisis<span></span></a></li>
</ul></li>
<li><a href="activity-17-spatially-continuous-data-iii.html#activity-17-spatially-continuous-data-iii" id="toc-activity-17-spatially-continuous-data-iii"><span class="toc-section-number">36</span> Activity 17: Spatially Continuous Data III<span></span></a>
<ul>
<li><a href="activity-17-spatially-continuous-data-iii.html#practice-questions-14" id="toc-practice-questions-14"><span class="toc-section-number">36.1</span> Practice questions<span></span></a></li>
<li><a href="activity-17-spatially-continuous-data-iii.html#learning-objectives-35" id="toc-learning-objectives-35"><span class="toc-section-number">36.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-17-spatially-continuous-data-iii.html#suggested-reading-16" id="toc-suggested-reading-16"><span class="toc-section-number">36.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-17-spatially-continuous-data-iii.html#preliminaries-34" id="toc-preliminaries-34"><span class="toc-section-number">36.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-17-spatially-continuous-data-iii.html#activity-16" id="toc-activity-16"><span class="toc-section-number">36.5</span> Activity<span></span></a></li>
</ul></li>
<li><a href="spatially-continuous-data-iv.html#spatially-continuous-data-iv" id="toc-spatially-continuous-data-iv"><span class="toc-section-number">37</span> Spatially Continuous Data IV<span></span></a>
<ul>
<li><a href="spatially-continuous-data-iv.html#learning-objectives-36" id="toc-learning-objectives-36"><span class="toc-section-number">37.1</span> Learning objectives<span></span></a></li>
<li><a href="spatially-continuous-data-iv.html#suggested-reading-17" id="toc-suggested-reading-17"><span class="toc-section-number">37.2</span> Suggested reading<span></span></a></li>
<li><a href="spatially-continuous-data-iv.html#preliminaries-35" id="toc-preliminaries-35"><span class="toc-section-number">37.3</span> Preliminaries<span></span></a></li>
<li><a href="spatially-continuous-data-iv.html#using-residual-spatial-pattern-to-estimate-prediction-errors" id="toc-using-residual-spatial-pattern-to-estimate-prediction-errors"><span class="toc-section-number">37.4</span> Using residual spatial pattern to estimate prediction errors<span></span></a></li>
<li><a href="spatially-continuous-data-iv.html#kriging-a-method-for-optimal-prediction." id="toc-kriging-a-method-for-optimal-prediction."><span class="toc-section-number">37.5</span> Kriging: a method for optimal prediction.<span></span></a></li>
</ul></li>
<li><a href="activity-18-spatially-continuous-data-iv.html#activity-18-spatially-continuous-data-iv" id="toc-activity-18-spatially-continuous-data-iv"><span class="toc-section-number">38</span> Activity 18: Spatially Continuous Data IV<span></span></a>
<ul>
<li><a href="activity-18-spatially-continuous-data-iv.html#practice-questions-15" id="toc-practice-questions-15"><span class="toc-section-number">38.1</span> Practice questions<span></span></a></li>
<li><a href="activity-18-spatially-continuous-data-iv.html#learning-objectives-37" id="toc-learning-objectives-37"><span class="toc-section-number">38.2</span> Learning objectives<span></span></a></li>
<li><a href="activity-18-spatially-continuous-data-iv.html#suggested-reading-18" id="toc-suggested-reading-18"><span class="toc-section-number">38.3</span> Suggested reading<span></span></a></li>
<li><a href="activity-18-spatially-continuous-data-iv.html#preliminaries-36" id="toc-preliminaries-36"><span class="toc-section-number">38.4</span> Preliminaries<span></span></a></li>
<li><a href="activity-18-spatially-continuous-data-iv.html#activity-17" id="toc-activity-17"><span class="toc-section-number">38.5</span> Activity<span></span></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/paezha/spatial-analysis-R" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to Spatial Data Analysis and Statistics: A Course in <code>R</code></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-maps" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Introduction to Mapping in <code>R</code><a href="introduction-to-maps.html#introduction-to-maps" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><em>NOTE</em>: The source files for this book are available with companion package <a href="https://paezha.github.io/isdas/">{isdas}</a>. The source files are in Rmarkdown format and packed as templates. These files allow you execute code within the notebook, so that you can work interactively with the notes.</p>
<p>Spatial statistics is a sub-field of spatial analysis that has grown in relevance in recent years as a result of 1) the availability of information that is geo-coded, in other words, that has geographical references; and 2) the availability of software to analyze such information.</p>
<p>A key technology fueling this trend is that of Geographical Information Systems (GIS). GIS are, in simplest terms, digital mapping for the 21st century. In most cases, however, GIS go beyond cartographic functions to also enable and enhance our ability to analyze data.</p>
<p>There are many available packages for geographical information analysis. Some are very user friendly, and widely available in many institutional contexts, such as ESRI’s Arc software. Others are fairly specialized, such as Caliper’s TransCAD, which implements many operations of interest for transportation engineering and planning.</p>
<p>Others packages have the advantage of being more flexible and/or free.</p>
<p>Such is the case of the <code>R</code> statistical computing language. <code>R</code> has been adopted by many in the spatial analysis community, and a number of specialized libraries have been developed to support mapping and spatial data analysis functions.</p>
<p>The objective of this note is to provide an introduction to mapping in <code>R</code>. Maps are one of the fundamental tools of spatial statistics and spatial analysis, and <code>R</code> allows for many GIS-like functions.</p>
<p>In the previous reading/practice you created a simple proportional symbols map. In this reading/practice you will learn how to create more sophisticated maps in <code>R</code>.</p>
<div id="learning-objectives-2" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Learning Objectives<a href="introduction-to-maps.html#learning-objectives-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this reading, you will:</p>
<ol style="list-style-type: decimal">
<li>Revisit how to install and load a package.</li>
<li>Learn how to invoke a data and view the data structure.</li>
<li>Learn how to easily create maps using <code>R</code>.</li>
<li>Think about how statistical maps help us understand patterns.</li>
</ol>
</div>
<div id="suggested-readings" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Suggested Readings<a href="introduction-to-maps.html#suggested-readings" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Bivand RS, Pebesma E, Gomez-Rubio V <span class="citation">(<a href="#ref-Bivand2008" role="doc-biblioref">2008</a>)</span> Applied Spatial Data Analysis with R, Chapters 2-3. Springer: New York</li>
<li>Brunsdon C and Comber L <span class="citation">(<a href="#ref-Brunsdon2015R" role="doc-biblioref">2015</a>)</span> An Introduction to R for Spatial Analysis and Mapping, Chapter 3. Sage: Los Angeles</li>
</ul>
</div>
<div id="preliminaries-1" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Preliminaries<a href="introduction-to-maps.html#preliminaries-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>It is good practice to clear the working space to make sure that you do not have extraneous items there when you begin your work. The command in <code>R</code> to clear the workspace is <code>rm</code> (for “remove”), followed by a list of items to be removed. To clear the workspace from <em>all</em> objects, do the following:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="introduction-to-maps.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The function `ls()` lists all objects in the Environment, that is, your current workspace;</span></span>
<span id="cb81-2"><a href="introduction-to-maps.html#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="co"># `rm()` removes all objects listed in the argument `list = `</span></span>
<span id="cb81-3"><a href="introduction-to-maps.html#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
</div>
<div id="packages" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Packages<a href="introduction-to-maps.html#packages" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>According to Wickham <span class="citation">(<a href="#ref-wickham2015rpackages" role="doc-biblioref">2015</a>)</span> packages are the basic units of reproducible code in the <code>R</code> multiverse.</p>
<p>Now that your workspace is clear, you can proceed to load a package. In this case, the package is the one used for this book/course, called <code>isdas</code>:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="introduction-to-maps.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co">#The function &#39;library&#39; is used to load the data we want to work with. </span></span>
<span id="cb82-2"><a href="introduction-to-maps.html#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="co"># In this case, it is the isdas master package that we want to work with </span></span>
<span id="cb82-3"><a href="introduction-to-maps.html#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(isdas)</span></code></pre></div>
<pre><code>## Warning: replacing previous import &#39;plotly::filter&#39; by &#39;stats::filter&#39; when
## loading &#39;isdas&#39;</code></pre>
<pre><code>## Warning: replacing previous import &#39;dplyr::lag&#39; by &#39;stats::lag&#39; when loading
## &#39;isdas&#39;</code></pre>
<p>The package includes a few datasets that will be used throughout the book:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="introduction-to-maps.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">#The function `data` is used to check if a dataset is present within any loaded packages. </span></span>
<span id="cb85-2"><a href="introduction-to-maps.html#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="co"># In this case, we are looking for `snow_deaths` and `snow_pumps`</span></span>
<span id="cb85-3"><a href="introduction-to-maps.html#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;snow_deaths&quot;</span>)</span>
<span id="cb85-4"><a href="introduction-to-maps.html#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;snow_pumps&quot;</span>)</span></code></pre></div>
</div>
<div id="exploring-dataframes-and-a-simple-proportional-symbols-map" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Exploring Dataframes and a Simple Proportional Symbols Map<a href="introduction-to-maps.html#exploring-dataframes-and-a-simple-proportional-symbols-map" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If you correctly loaded the library, you can now access the dataframes in the package <code>isdas</code>. For this section, you will need two dataframes, namely <code>snow_pumps</code> and <code>snow_deaths</code>:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="introduction-to-maps.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co">#The function `head` will display the first few rows of the dataframe, snow_deaths </span></span>
<span id="cb86-2"><a href="introduction-to-maps.html#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(snow_deaths)</span></code></pre></div>
<pre><code>##         long      lat Id Count
## 0 -0.1379301 51.51342  1     3
## 1 -0.1378831 51.51336  2     2
## 2 -0.1378529 51.51332  3     1
## 3 -0.1378120 51.51326  4     1
## 4 -0.1377668 51.51320  5     4
## 5 -0.1375369 51.51318  6     2</code></pre>
<p>These data are from the famous London cholera example by John Snow (not the one from Game of Thrones, but the British physician). John Snow is considered the father of spatial epidemiology, and his study mapping the outbreak is credited with helping find its cause.This study investigates the cholera outbreak of Soho, London, in 1854.</p>
<p>The dataframe <code>snow_deaths</code> includes the geocoded addresses of cholera deaths in <code>long</code> and <code>lat</code>, and the number of deaths (the <code>Count</code>) recorded at each address, as well as unique identifiers for the addresses (<code>Id</code>).</p>
<p>A second dataframe <code>snow_pumps</code> includes the geocoded locations of water pumps in Soho:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="introduction-to-maps.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(snow_pumps)</span></code></pre></div>
<pre><code>##            long      lat  Id Count
## 01   -0.1366679 51.51334 251     1
## 1100 -0.1395862 51.51388 252     1
## 250  -0.1396710 51.51491 253     1
## 310  -0.1316299 51.51235 254     1
## 410  -0.1335944 51.51214 255     1
## 510  -0.1359191 51.51154 256     1</code></pre>
<p>As in your previous reading, it is possible to map the cases using <code>ggplot2</code>. Begin by loading the package <code>tidyverse</code>:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="introduction-to-maps.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;Tidyverse&#39; is a collection of R packages designed for data science used in everyday data analyses  </span></span>
<span id="cb90-2"><a href="introduction-to-maps.html#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>Now, you can create a blank <code>ggplot2</code> object from which you can render the points for deaths and the pumps.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="introduction-to-maps.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co">#The function `ggplot` is used for data visualization - it creates a graph. </span></span>
<span id="cb91-2"><a href="introduction-to-maps.html#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The function `geom_point` tells R you want to create a plot of points. </span></span>
<span id="cb91-3"><a href="introduction-to-maps.html#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="co"># `data = snow_deaths` tells R you want to use the `snow_deaths` dataframe. </span></span>
<span id="cb91-4"><a href="introduction-to-maps.html#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="co"># `aes` stands for aesthetics of your graph where `x = long` sets the x axis </span></span>
<span id="cb91-5"><a href="introduction-to-maps.html#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="co"># to `long`, where `y = lat` sets the y axis to `lat`, where `color = blue` </span></span>
<span id="cb91-6"><a href="introduction-to-maps.html#cb91-6" aria-hidden="true" tabindex="-1"></a><span class="co"># colours the points blue and `shape = 16` assigns the shape of the points -</span></span>
<span id="cb91-7"><a href="introduction-to-maps.html#cb91-7" aria-hidden="true" tabindex="-1"></a><span class="co"># in this case, `16` are circles and `17` are triangles  </span></span>
<span id="cb91-8"><a href="introduction-to-maps.html#cb91-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-9"><a href="introduction-to-maps.html#cb91-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb91-10"><a href="introduction-to-maps.html#cb91-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> snow_deaths, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">shape =</span> <span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb91-11"><a href="introduction-to-maps.html#cb91-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> snow_pumps, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat), <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">shape =</span> <span class="dv">17</span>)</span></code></pre></div>
<p><img src="spatial-analysis-R_files/figure-html/ch03-plot-snow-deaths-1.png" width="672" /></p>
<p>This map is a decent example of how to represent visually some contents in the dataframe. Here, information is displayed using different colours and symbols to represent pumps and deaths from the London Cholera Example. Though this map provides useful insights, it is not of the greatest quality. We will illustrate other ways of creating maps below, including interactive maps.</p>
</div>
<div id="improving-on-the-proportional-symbols-map" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Improving on the Proportional Symbols Map<a href="introduction-to-maps.html#improving-on-the-proportional-symbols-map" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A package that extends the functionality of mapping in <code>R</code> is <code>leaflet</code>. A key feature of the <code>leaflet</code> package is the ability to make maps interactive for the user. We will see next how to enhance our proportional symbol map using this package. First you need to load the package (you need to install it first if you have not already):</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="introduction-to-maps.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># &#39;Leaflet&#39; is a package used for visualizing data on a map in R. </span></span>
<span id="cb92-2"><a href="introduction-to-maps.html#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;leaflet&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;leaflet&#39;</span>)</span>
<span id="cb92-3"><a href="introduction-to-maps.html#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="co"># &#39;Magrittr&#39; is a package used for creating pipe operators </span></span>
<span id="cb92-4"><a href="introduction-to-maps.html#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;leaflet&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;magrittr&#39;</span>)</span>
<span id="cb92-5"><a href="introduction-to-maps.html#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb92-6"><a href="introduction-to-maps.html#cb92-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span></code></pre></div>
<p>The first step is to create a <code>leaflet</code> object, which will be saved in <code>m</code> :</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="introduction-to-maps.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Here, we create a `leaflet` object and assign it to the variable, &#39;m&#39;. </span></span>
<span id="cb93-2"><a href="introduction-to-maps.html#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The `setView` function sets the view of the map where `lng = -0.136` </span></span>
<span id="cb93-3"><a href="introduction-to-maps.html#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="co"># sets the longitutde, &#39;lat = 51.513&#39; sets the latitude and the map zoom </span></span>
<span id="cb93-4"><a href="introduction-to-maps.html#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="co"># is set to 16. The `%&gt;%` is a pipe operator that passes the output from </span></span>
<span id="cb93-5"><a href="introduction-to-maps.html#cb93-5" aria-hidden="true" tabindex="-1"></a><span class="co"># the left hand side of the operator to the first argument of the right </span></span>
<span id="cb93-6"><a href="introduction-to-maps.html#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="co"># hand side of the operator. In this case we are telling `R` that we want </span></span>
<span id="cb93-7"><a href="introduction-to-maps.html#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="co"># to center the map on the set longitude and latitude, with a zoom level </span></span>
<span id="cb93-8"><a href="introduction-to-maps.html#cb93-8" aria-hidden="true" tabindex="-1"></a><span class="co"># of 16, which corresponds roughly to a neighborhood </span></span>
<span id="cb93-9"><a href="introduction-to-maps.html#cb93-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-10"><a href="introduction-to-maps.html#cb93-10" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">leaflet</span>(<span class="at">data =</span> snow_deaths) <span class="sc">%&gt;%</span> </span>
<span id="cb93-11"><a href="introduction-to-maps.html#cb93-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setView</span>(<span class="at">lng =</span> <span class="sc">-</span><span class="fl">0.136</span>, <span class="at">lat =</span> <span class="fl">51.513</span>, <span class="at">zoom =</span> <span class="dv">16</span>)</span></code></pre></div>
<p>This map looks like this at this point:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="introduction-to-maps.html#cb94-1" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<div id="htmlwidget-5875fd80de28cace1837" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-5875fd80de28cace1837">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[51.513,-0.136],16,[]]},"evals":[],"jsHooks":[]}</script>
<p>The map is empty! This is because we have not yet added any geographical information to plot. We can begin by adding a basemap as follows:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="introduction-to-maps.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We are adding a basemap or background map of the study area </span></span>
<span id="cb95-2"><a href="introduction-to-maps.html#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="co"># by means of the `addTiles` function to the &#39;m&#39; variable </span></span>
<span id="cb95-3"><a href="introduction-to-maps.html#cb95-3" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> m <span class="sc">%&gt;%</span> <span class="fu">addTiles</span>()</span>
<span id="cb95-4"><a href="introduction-to-maps.html#cb95-4" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<div id="htmlwidget-516d93c27229d9c55792" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-516d93c27229d9c55792">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[51.513,-0.136],16,[]],"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]}]},"evals":[],"jsHooks":[]}</script>
<p>The map now shows the neighborhood in Soho where the cholera outbreak happened. Now, at long last, we can add the cases of cholera deaths to the map. For this, we indicate the coordinates (preceded by <code>~</code>), and set an option for clustering by means of the <code>clusterOptions</code> in the following fashion:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="introduction-to-maps.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We are adding the cholera deaths to the map using &#39;group = Deaths&#39;. </span></span>
<span id="cb96-2"><a href="introduction-to-maps.html#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The &#39;~&#39; symbol tells R to use the same longitude and latitude values </span></span>
<span id="cb96-3"><a href="introduction-to-maps.html#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co"># used in the previous block of code and the &#39;clusterOptions = markerClusterOptions()&#39;</span></span>
<span id="cb96-4"><a href="introduction-to-maps.html#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="co"># clusters a large number of markers on the map - in this case it is clusturing </span></span>
<span id="cb96-5"><a href="introduction-to-maps.html#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="co"># number of deaths into icons with numbers  </span></span>
<span id="cb96-6"><a href="introduction-to-maps.html#cb96-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-7"><a href="introduction-to-maps.html#cb96-7" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> m <span class="sc">%&gt;%</span> </span>
<span id="cb96-8"><a href="introduction-to-maps.html#cb96-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="sc">~</span>long, </span>
<span id="cb96-9"><a href="introduction-to-maps.html#cb96-9" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>lat, </span>
<span id="cb96-10"><a href="introduction-to-maps.html#cb96-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">clusterOptions =</span> <span class="fu">markerClusterOptions</span>(),</span>
<span id="cb96-11"><a href="introduction-to-maps.html#cb96-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">&quot;Deaths&quot;</span>)</span>
<span id="cb96-12"><a href="introduction-to-maps.html#cb96-12" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<div id="htmlwidget-c94efa222a5bbfc0fda0" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-c94efa222a5bbfc0fda0">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[51.513,-0.136],16,[]],"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[51.5134177124172,51.5133613998342,51.5133170489738,51.5132621296606,51.5132039767177,51.5131835520485,51.5133591867692,51.5133280355029,51.5133229578595,51.5134266728971,51.5133811892354,51.5134623424476,51.5132159285183,51.5131694485925,51.5131164749112,51.5132396116239,51.5131644210432,51.5131781841165,51.5131111979614,51.5130554375432,51.5134413327101,51.5135924208041,51.5134023383083,51.5133795728564,51.5134107815111,51.5136414526995,51.5136934269499,51.5137448755457,51.5136761001242,51.513589650219,51.5136630762747,51.5135023127246,51.5135825682104,51.5135413161461,51.5132975437477,51.5132905255639,51.5130133334294,51.5129647596832,51.5128932509875,51.5129641586053,51.5130248397129,51.5130266757898,51.5128309621333,51.5128845609982,51.512526461566,51.5124652322484,51.5124282017241,51.5124146502324,51.5125095595528,51.5123779695186,51.5124468842647,51.5124910903494,51.5123735237671,51.5123394658191,51.5123641435114,51.5123186592339,51.5125404192213,51.5126486001691,51.5126924102854,51.5129565492695,51.5127646786194,51.512780135276,51.5127261821783,51.5126812212502,51.5129138940919,51.5130464173057,51.5130736199273,51.5130871653118,51.5131217300639,51.5131870380734,51.5132144650686,51.5132493670279,51.5132712298232,51.5133000053292,51.513159501803,51.5130159068474,51.5129212632447,51.5128901273703,51.5128594972903,51.5128304407162,51.5127817133823,51.5127289953887,51.5128684899971,51.5127227024346,51.5126544175993,51.5127129238493,51.5126151331328,51.5124909274326,51.512449001123,51.5124646732061,51.5124131425941,51.5123580283144,51.5122714848582,51.5123551037207,51.5119909705128,51.5120825390407,51.5120308435294,51.511969715045,51.5118816026324,51.5120498288562,51.5122501450068,51.5121617481752,51.5122122493473,51.5125728000174,51.5125753130745,51.512671783869,51.5127265275065,51.5127937521836,51.5128459418976,51.5128794716827,51.5129387875413,51.5127652622967,51.5128439493493,51.5125320092663,51.5121976542315,51.5122147337627,51.5131535576567,51.5130560038467,51.5131654276186,51.5130978234435,51.5132380800188,51.5132931133948,51.5133792266715,51.5134305977733,51.5134746492998,51.513421592435,51.5135280975109,51.513481380808,51.5135939675143,51.5132269067679,51.5131797922196,51.5131320343792,51.5130478021104,51.5130059829172,51.5128825050525,51.5132697651429,51.5134585203029,51.513431301037,51.5134020526073,51.5125929850428,51.5125846188892,51.5125545302918,51.5125207793547,51.5131371982402,51.513228105499,51.5131523869471,51.5132575922725,51.5135441147158,51.5136261147011,51.51363711464,51.5135240566799,51.513819503245,51.5137237779958,51.5137037259797,51.5138308609666,51.5139154145108,51.5135966548401,51.5140320770328,51.5138912073965,51.5137575614511,51.5140647728081,51.5141461334489,51.5142009244163,51.5142299752522,51.5143186433979,51.5143770664962,51.5143572324987,51.5143820227307,51.5144016914121,51.5145215552817,51.5144974265937,51.5144724263714,51.5145042399781,51.5145458084146,51.5145612191587,51.5145938592689,51.514581130254,51.5146055484873,51.5158344922564,51.5151947768411,51.515148910154,51.514818276315,51.5148434841345,51.5149136908635,51.5144955261107,51.5147432533526,51.5144670343971,51.514453057596,51.5148446763327,51.5143888129264,51.5143992425991,51.5143350546395,51.5142241938589,51.5142200496112,51.5141451611806,51.5141081200325,51.5143589918305,51.5143258278403,51.5145439352589,51.5145694098648,51.5145860585039,51.5146120020105,51.5145748931058,51.5145068922349,51.5142738740676,51.5142925294013,51.5140584415023,51.514147904667,51.5139612895256,51.514026681852,51.514075625164,51.5140955500651,51.5141341964856,51.5140332357038,51.51399639475,51.5139599546022,51.5139447099578,51.5138209431322,51.5139986643176,51.5137949340791,51.5137664510085,51.5137255314975,51.5136915654178,51.5136724428681,51.5136025045006,51.5134817494629,51.5134582133826,51.5134291944654,51.5134042540195,51.5133593215734,51.5133780414208,51.513854511423,51.5138745706323,51.513564922941,51.5136162065225,51.5137422432042,51.5139182142438,51.5137723972996,51.5135021957619,51.5137121442364,51.513643808406,51.5137110723171,51.5140612381261,51.5147479928322,51.5147942645459,51.5145260811066,51.5147058764589,51.5123109173558,51.5119984599128,51.5118557192269],[-0.137930104010558,-0.137883080050043,-0.137852910334902,-0.137811953946547,-0.13776682625895,-0.137536941414194,-0.138200478229867,-0.138045001181023,-0.138276150015847,-0.138223486436163,-0.138337036751987,-0.138562712674585,-0.138425595569866,-0.138378445203786,-0.138337151287555,-0.138645453374908,-0.138697906588005,-0.137924280930384,-0.137864911517368,-0.137811483555299,-0.138761923444541,-0.138798841466148,-0.139044685640647,-0.138969769250852,-0.138863423701818,-0.138752495986867,-0.138808158700832,-0.138856026577997,-0.138886865385659,-0.139239358857342,-0.139321273414791,-0.139315996025543,-0.139615957798045,-0.139719311011435,-0.140073811518465,-0.139094018235715,-0.13969719300269,-0.139327083693065,-0.139317388053158,-0.139186819378375,-0.13903594103458,-0.139209112335763,-0.138427009719529,-0.138624089822381,-0.138095738730479,-0.138034566532032,-0.137983558408747,-0.138064861673808,-0.138193772599653,-0.13781768058354,-0.137655876664111,-0.137584251590895,-0.137650308280313,-0.137449685402355,-0.137375960345323,-0.137327183060384,-0.136979895082568,-0.137180471112416,-0.137052256705603,-0.137695283980724,-0.137532968405366,-0.137419027899659,-0.137367685597074,-0.137324900434833,-0.13753072078947,-0.137561709372639,-0.137465963095969,-0.137386069143822,-0.137305905402978,-0.137088921783477,-0.136996507652827,-0.136858967055843,-0.136777631573641,-0.13670521328998,-0.136493541498875,-0.1363296093128,-0.13642355437644,-0.136523354073943,-0.136599464715498,-0.136698903900388,-0.136818608892988,-0.136972720982157,-0.13635852222683,-0.136629907913101,-0.136584421189908,-0.136422562827327,-0.136345100970831,-0.136437423660872,-0.13637725593617,-0.136196885696964,-0.136141564934112,-0.136101691853672,-0.13603019775476,-0.136309771693643,-0.135940418807579,-0.135857833871398,-0.135800071388929,-0.13571676147881,-0.135119199651659,-0.135144413368991,-0.135393879321116,-0.135409196321426,-0.135472107671099,-0.135765474474457,-0.13587129725092,-0.135975667166644,-0.136032902456437,-0.136115157826193,-0.136180249325612,-0.136083007793062,-0.136139451247873,-0.135328712820307,-0.135122094886835,-0.134644707328384,-0.134521544053972,-0.13496689238324,-0.135098133618687,-0.134393575502607,-0.134505247562517,-0.134436800798234,-0.134593602630156,-0.134640476323922,-0.134708685062981,-0.134756193685838,-0.135244384441936,-0.134897297638676,-0.135157928194478,-0.135344164321286,-0.135063381103534,-0.135800950518772,-0.135761610342889,-0.135740195630197,-0.135644938517451,-0.135601712101864,-0.13550137997266,-0.135832121260455,-0.136048811687163,-0.136139629106658,-0.136227828987915,-0.134999321749233,-0.134792944843084,-0.134896134291146,-0.13499995822671,-0.133482869177093,-0.133265220914633,-0.133296159096638,-0.132933520033842,-0.133998061085642,-0.134041910097202,-0.134156125430805,-0.134091267691142,-0.134272307054501,-0.134220279673234,-0.134704077450268,-0.134782332224299,-0.135010480599383,-0.134923206586314,-0.134884697385023,-0.134212375301518,-0.13413525046192,-0.134364183806531,-0.134446761264503,-0.134479407284249,-0.13465781338051,-0.134367284903915,-0.134178675873201,-0.134159802982986,-0.134068743540174,-0.134085166112154,-0.133821454567768,-0.133922315573705,-0.133849801388977,-0.133725297875756,-0.133745361367268,-0.133675758620499,-0.133563506220195,-0.133466554504968,-0.133392911328955,-0.13447415999148,-0.135259025703631,-0.13539533964416,-0.136022252986943,-0.136804117171357,-0.13658336059377,-0.135652973903524,-0.135577955351805,-0.134859650909087,-0.134689584742692,-0.13481827258339,-0.135703556340337,-0.135561351789002,-0.135648690168136,-0.135415186294267,-0.135576357841223,-0.135356677740601,-0.135475413644982,-0.136226113608836,-0.136328132175019,-0.136222147739477,-0.136117449584061,-0.13603032610347,-0.136266512833731,-0.136421363235172,-0.136934565325728,-0.136930812044807,-0.136799217089535,-0.136779604473422,-0.136695911836955,-0.136712199114799,-0.136123239897924,-0.135958317916009,-0.135882661614175,-0.135787715898289,-0.135849408611936,-0.13600822222389,-0.136098773834616,-0.136169607538601,-0.135485063868566,-0.135374041226318,-0.135581830640019,-0.135679025987977,-0.135814477761582,-0.135904600280311,-0.135992150697614,-0.136216866756181,-0.136578747125891,-0.13667508400121,-0.136764348161167,-0.136876973157585,-0.13695294902936,-0.137230493796608,-0.136650546959065,-0.136502664677893,-0.13736659135294,-0.137421887399464,-0.137472256016921,-0.138300115934668,-0.137362664817636,-0.137995119447203,-0.138139258555061,-0.138239344033771,-0.138271816604014,-0.138082797902251,-0.137911683038597,-0.137707109451447,-0.137107740547768,-0.137064556384258,-0.138473542100727,-0.138123159327677,-0.137762148270563],null,null,"Deaths",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[51.5118557192269,51.5158344922564],"lng":[-0.140073811518465,-0.132933520033842]}},"evals":[],"jsHooks":[]}</script>
<p>The map now displays the locations of cholera deaths on the map. If you zoom in, the clusters will rearrange accordingly. Try it! The other information that we have available is the location of the water pumps, which we can add to the map above (notice that the Broad Street Pump is already shown in the basemap!):</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="introduction-to-maps.html#cb97-1" aria-hidden="true" tabindex="-1"></a>m <span class="sc">%&gt;%</span> </span>
<span id="cb97-2"><a href="introduction-to-maps.html#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">data =</span> snow_pumps, </span>
<span id="cb97-3"><a href="introduction-to-maps.html#cb97-3" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>long, </span>
<span id="cb97-4"><a href="introduction-to-maps.html#cb97-4" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>lat, </span>
<span id="cb97-5"><a href="introduction-to-maps.html#cb97-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">&quot;Pumps&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-3bc4abc938d685704f9d" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3bc4abc938d685704f9d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[51.513,-0.136],16,[]],"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[51.5134177124172,51.5133613998342,51.5133170489738,51.5132621296606,51.5132039767177,51.5131835520485,51.5133591867692,51.5133280355029,51.5133229578595,51.5134266728971,51.5133811892354,51.5134623424476,51.5132159285183,51.5131694485925,51.5131164749112,51.5132396116239,51.5131644210432,51.5131781841165,51.5131111979614,51.5130554375432,51.5134413327101,51.5135924208041,51.5134023383083,51.5133795728564,51.5134107815111,51.5136414526995,51.5136934269499,51.5137448755457,51.5136761001242,51.513589650219,51.5136630762747,51.5135023127246,51.5135825682104,51.5135413161461,51.5132975437477,51.5132905255639,51.5130133334294,51.5129647596832,51.5128932509875,51.5129641586053,51.5130248397129,51.5130266757898,51.5128309621333,51.5128845609982,51.512526461566,51.5124652322484,51.5124282017241,51.5124146502324,51.5125095595528,51.5123779695186,51.5124468842647,51.5124910903494,51.5123735237671,51.5123394658191,51.5123641435114,51.5123186592339,51.5125404192213,51.5126486001691,51.5126924102854,51.5129565492695,51.5127646786194,51.512780135276,51.5127261821783,51.5126812212502,51.5129138940919,51.5130464173057,51.5130736199273,51.5130871653118,51.5131217300639,51.5131870380734,51.5132144650686,51.5132493670279,51.5132712298232,51.5133000053292,51.513159501803,51.5130159068474,51.5129212632447,51.5128901273703,51.5128594972903,51.5128304407162,51.5127817133823,51.5127289953887,51.5128684899971,51.5127227024346,51.5126544175993,51.5127129238493,51.5126151331328,51.5124909274326,51.512449001123,51.5124646732061,51.5124131425941,51.5123580283144,51.5122714848582,51.5123551037207,51.5119909705128,51.5120825390407,51.5120308435294,51.511969715045,51.5118816026324,51.5120498288562,51.5122501450068,51.5121617481752,51.5122122493473,51.5125728000174,51.5125753130745,51.512671783869,51.5127265275065,51.5127937521836,51.5128459418976,51.5128794716827,51.5129387875413,51.5127652622967,51.5128439493493,51.5125320092663,51.5121976542315,51.5122147337627,51.5131535576567,51.5130560038467,51.5131654276186,51.5130978234435,51.5132380800188,51.5132931133948,51.5133792266715,51.5134305977733,51.5134746492998,51.513421592435,51.5135280975109,51.513481380808,51.5135939675143,51.5132269067679,51.5131797922196,51.5131320343792,51.5130478021104,51.5130059829172,51.5128825050525,51.5132697651429,51.5134585203029,51.513431301037,51.5134020526073,51.5125929850428,51.5125846188892,51.5125545302918,51.5125207793547,51.5131371982402,51.513228105499,51.5131523869471,51.5132575922725,51.5135441147158,51.5136261147011,51.51363711464,51.5135240566799,51.513819503245,51.5137237779958,51.5137037259797,51.5138308609666,51.5139154145108,51.5135966548401,51.5140320770328,51.5138912073965,51.5137575614511,51.5140647728081,51.5141461334489,51.5142009244163,51.5142299752522,51.5143186433979,51.5143770664962,51.5143572324987,51.5143820227307,51.5144016914121,51.5145215552817,51.5144974265937,51.5144724263714,51.5145042399781,51.5145458084146,51.5145612191587,51.5145938592689,51.514581130254,51.5146055484873,51.5158344922564,51.5151947768411,51.515148910154,51.514818276315,51.5148434841345,51.5149136908635,51.5144955261107,51.5147432533526,51.5144670343971,51.514453057596,51.5148446763327,51.5143888129264,51.5143992425991,51.5143350546395,51.5142241938589,51.5142200496112,51.5141451611806,51.5141081200325,51.5143589918305,51.5143258278403,51.5145439352589,51.5145694098648,51.5145860585039,51.5146120020105,51.5145748931058,51.5145068922349,51.5142738740676,51.5142925294013,51.5140584415023,51.514147904667,51.5139612895256,51.514026681852,51.514075625164,51.5140955500651,51.5141341964856,51.5140332357038,51.51399639475,51.5139599546022,51.5139447099578,51.5138209431322,51.5139986643176,51.5137949340791,51.5137664510085,51.5137255314975,51.5136915654178,51.5136724428681,51.5136025045006,51.5134817494629,51.5134582133826,51.5134291944654,51.5134042540195,51.5133593215734,51.5133780414208,51.513854511423,51.5138745706323,51.513564922941,51.5136162065225,51.5137422432042,51.5139182142438,51.5137723972996,51.5135021957619,51.5137121442364,51.513643808406,51.5137110723171,51.5140612381261,51.5147479928322,51.5147942645459,51.5145260811066,51.5147058764589,51.5123109173558,51.5119984599128,51.5118557192269],[-0.137930104010558,-0.137883080050043,-0.137852910334902,-0.137811953946547,-0.13776682625895,-0.137536941414194,-0.138200478229867,-0.138045001181023,-0.138276150015847,-0.138223486436163,-0.138337036751987,-0.138562712674585,-0.138425595569866,-0.138378445203786,-0.138337151287555,-0.138645453374908,-0.138697906588005,-0.137924280930384,-0.137864911517368,-0.137811483555299,-0.138761923444541,-0.138798841466148,-0.139044685640647,-0.138969769250852,-0.138863423701818,-0.138752495986867,-0.138808158700832,-0.138856026577997,-0.138886865385659,-0.139239358857342,-0.139321273414791,-0.139315996025543,-0.139615957798045,-0.139719311011435,-0.140073811518465,-0.139094018235715,-0.13969719300269,-0.139327083693065,-0.139317388053158,-0.139186819378375,-0.13903594103458,-0.139209112335763,-0.138427009719529,-0.138624089822381,-0.138095738730479,-0.138034566532032,-0.137983558408747,-0.138064861673808,-0.138193772599653,-0.13781768058354,-0.137655876664111,-0.137584251590895,-0.137650308280313,-0.137449685402355,-0.137375960345323,-0.137327183060384,-0.136979895082568,-0.137180471112416,-0.137052256705603,-0.137695283980724,-0.137532968405366,-0.137419027899659,-0.137367685597074,-0.137324900434833,-0.13753072078947,-0.137561709372639,-0.137465963095969,-0.137386069143822,-0.137305905402978,-0.137088921783477,-0.136996507652827,-0.136858967055843,-0.136777631573641,-0.13670521328998,-0.136493541498875,-0.1363296093128,-0.13642355437644,-0.136523354073943,-0.136599464715498,-0.136698903900388,-0.136818608892988,-0.136972720982157,-0.13635852222683,-0.136629907913101,-0.136584421189908,-0.136422562827327,-0.136345100970831,-0.136437423660872,-0.13637725593617,-0.136196885696964,-0.136141564934112,-0.136101691853672,-0.13603019775476,-0.136309771693643,-0.135940418807579,-0.135857833871398,-0.135800071388929,-0.13571676147881,-0.135119199651659,-0.135144413368991,-0.135393879321116,-0.135409196321426,-0.135472107671099,-0.135765474474457,-0.13587129725092,-0.135975667166644,-0.136032902456437,-0.136115157826193,-0.136180249325612,-0.136083007793062,-0.136139451247873,-0.135328712820307,-0.135122094886835,-0.134644707328384,-0.134521544053972,-0.13496689238324,-0.135098133618687,-0.134393575502607,-0.134505247562517,-0.134436800798234,-0.134593602630156,-0.134640476323922,-0.134708685062981,-0.134756193685838,-0.135244384441936,-0.134897297638676,-0.135157928194478,-0.135344164321286,-0.135063381103534,-0.135800950518772,-0.135761610342889,-0.135740195630197,-0.135644938517451,-0.135601712101864,-0.13550137997266,-0.135832121260455,-0.136048811687163,-0.136139629106658,-0.136227828987915,-0.134999321749233,-0.134792944843084,-0.134896134291146,-0.13499995822671,-0.133482869177093,-0.133265220914633,-0.133296159096638,-0.132933520033842,-0.133998061085642,-0.134041910097202,-0.134156125430805,-0.134091267691142,-0.134272307054501,-0.134220279673234,-0.134704077450268,-0.134782332224299,-0.135010480599383,-0.134923206586314,-0.134884697385023,-0.134212375301518,-0.13413525046192,-0.134364183806531,-0.134446761264503,-0.134479407284249,-0.13465781338051,-0.134367284903915,-0.134178675873201,-0.134159802982986,-0.134068743540174,-0.134085166112154,-0.133821454567768,-0.133922315573705,-0.133849801388977,-0.133725297875756,-0.133745361367268,-0.133675758620499,-0.133563506220195,-0.133466554504968,-0.133392911328955,-0.13447415999148,-0.135259025703631,-0.13539533964416,-0.136022252986943,-0.136804117171357,-0.13658336059377,-0.135652973903524,-0.135577955351805,-0.134859650909087,-0.134689584742692,-0.13481827258339,-0.135703556340337,-0.135561351789002,-0.135648690168136,-0.135415186294267,-0.135576357841223,-0.135356677740601,-0.135475413644982,-0.136226113608836,-0.136328132175019,-0.136222147739477,-0.136117449584061,-0.13603032610347,-0.136266512833731,-0.136421363235172,-0.136934565325728,-0.136930812044807,-0.136799217089535,-0.136779604473422,-0.136695911836955,-0.136712199114799,-0.136123239897924,-0.135958317916009,-0.135882661614175,-0.135787715898289,-0.135849408611936,-0.13600822222389,-0.136098773834616,-0.136169607538601,-0.135485063868566,-0.135374041226318,-0.135581830640019,-0.135679025987977,-0.135814477761582,-0.135904600280311,-0.135992150697614,-0.136216866756181,-0.136578747125891,-0.13667508400121,-0.136764348161167,-0.136876973157585,-0.13695294902936,-0.137230493796608,-0.136650546959065,-0.136502664677893,-0.13736659135294,-0.137421887399464,-0.137472256016921,-0.138300115934668,-0.137362664817636,-0.137995119447203,-0.138139258555061,-0.138239344033771,-0.138271816604014,-0.138082797902251,-0.137911683038597,-0.137707109451447,-0.137107740547768,-0.137064556384258,-0.138473542100727,-0.138123159327677,-0.137762148270563],null,null,"Deaths",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[[51.5133411171264,51.5138759909098,51.5149055726104,51.5123540234819,51.5121388790536,51.5115423185445,51.5100193479995,51.5112952261304],[-0.136667876716997,-0.139586169059145,-0.13967102270027,-0.13162985673562,-0.133594411488385,-0.135919147673632,-0.133961736109809,-0.138198768040845],null,null,"Pumps",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[51.5100193479995,51.5158344922564],"lng":[-0.140073811518465,-0.13162985673562]}},"evals":[],"jsHooks":[]}</script>
<p>An alternative and quicker way to run the same bit of code is by means of pipe operators (<code>%&gt;%</code>). These operators make writing code a lot faster, easier to read, and more intuitive! Recall that a pipe operator will take the output of the preceding function, and pass it on as the first argument of the next:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="introduction-to-maps.html#cb98-1" aria-hidden="true" tabindex="-1"></a>m_test <span class="ot">&lt;-</span> <span class="fu">leaflet</span> () <span class="sc">%&gt;%</span> </span>
<span id="cb98-2"><a href="introduction-to-maps.html#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setView</span>(<span class="at">lng =</span> <span class="sc">-</span><span class="fl">0.136</span>, <span class="at">lat =</span> <span class="fl">51.513</span>, <span class="at">zoom =</span> <span class="dv">16</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb98-3"><a href="introduction-to-maps.html#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb98-4"><a href="introduction-to-maps.html#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">data =</span> snow_deaths, </span>
<span id="cb98-5"><a href="introduction-to-maps.html#cb98-5" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>long, </span>
<span id="cb98-6"><a href="introduction-to-maps.html#cb98-6" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>lat, </span>
<span id="cb98-7"><a href="introduction-to-maps.html#cb98-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">clusterOptions =</span> <span class="fu">markerClusterOptions</span>(), </span>
<span id="cb98-8"><a href="introduction-to-maps.html#cb98-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">&quot;Deaths&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb98-9"><a href="introduction-to-maps.html#cb98-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">data =</span> snow_pumps, </span>
<span id="cb98-10"><a href="introduction-to-maps.html#cb98-10" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>long, </span>
<span id="cb98-11"><a href="introduction-to-maps.html#cb98-11" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>lat, </span>
<span id="cb98-12"><a href="introduction-to-maps.html#cb98-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">&quot;Pumps&quot;</span>)</span>
<span id="cb98-13"><a href="introduction-to-maps.html#cb98-13" aria-hidden="true" tabindex="-1"></a>m_test</span></code></pre></div>
<div id="htmlwidget-32b424d3e61485d31fd4" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-32b424d3e61485d31fd4">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[51.513,-0.136],16,[]],"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[51.5134177124172,51.5133613998342,51.5133170489738,51.5132621296606,51.5132039767177,51.5131835520485,51.5133591867692,51.5133280355029,51.5133229578595,51.5134266728971,51.5133811892354,51.5134623424476,51.5132159285183,51.5131694485925,51.5131164749112,51.5132396116239,51.5131644210432,51.5131781841165,51.5131111979614,51.5130554375432,51.5134413327101,51.5135924208041,51.5134023383083,51.5133795728564,51.5134107815111,51.5136414526995,51.5136934269499,51.5137448755457,51.5136761001242,51.513589650219,51.5136630762747,51.5135023127246,51.5135825682104,51.5135413161461,51.5132975437477,51.5132905255639,51.5130133334294,51.5129647596832,51.5128932509875,51.5129641586053,51.5130248397129,51.5130266757898,51.5128309621333,51.5128845609982,51.512526461566,51.5124652322484,51.5124282017241,51.5124146502324,51.5125095595528,51.5123779695186,51.5124468842647,51.5124910903494,51.5123735237671,51.5123394658191,51.5123641435114,51.5123186592339,51.5125404192213,51.5126486001691,51.5126924102854,51.5129565492695,51.5127646786194,51.512780135276,51.5127261821783,51.5126812212502,51.5129138940919,51.5130464173057,51.5130736199273,51.5130871653118,51.5131217300639,51.5131870380734,51.5132144650686,51.5132493670279,51.5132712298232,51.5133000053292,51.513159501803,51.5130159068474,51.5129212632447,51.5128901273703,51.5128594972903,51.5128304407162,51.5127817133823,51.5127289953887,51.5128684899971,51.5127227024346,51.5126544175993,51.5127129238493,51.5126151331328,51.5124909274326,51.512449001123,51.5124646732061,51.5124131425941,51.5123580283144,51.5122714848582,51.5123551037207,51.5119909705128,51.5120825390407,51.5120308435294,51.511969715045,51.5118816026324,51.5120498288562,51.5122501450068,51.5121617481752,51.5122122493473,51.5125728000174,51.5125753130745,51.512671783869,51.5127265275065,51.5127937521836,51.5128459418976,51.5128794716827,51.5129387875413,51.5127652622967,51.5128439493493,51.5125320092663,51.5121976542315,51.5122147337627,51.5131535576567,51.5130560038467,51.5131654276186,51.5130978234435,51.5132380800188,51.5132931133948,51.5133792266715,51.5134305977733,51.5134746492998,51.513421592435,51.5135280975109,51.513481380808,51.5135939675143,51.5132269067679,51.5131797922196,51.5131320343792,51.5130478021104,51.5130059829172,51.5128825050525,51.5132697651429,51.5134585203029,51.513431301037,51.5134020526073,51.5125929850428,51.5125846188892,51.5125545302918,51.5125207793547,51.5131371982402,51.513228105499,51.5131523869471,51.5132575922725,51.5135441147158,51.5136261147011,51.51363711464,51.5135240566799,51.513819503245,51.5137237779958,51.5137037259797,51.5138308609666,51.5139154145108,51.5135966548401,51.5140320770328,51.5138912073965,51.5137575614511,51.5140647728081,51.5141461334489,51.5142009244163,51.5142299752522,51.5143186433979,51.5143770664962,51.5143572324987,51.5143820227307,51.5144016914121,51.5145215552817,51.5144974265937,51.5144724263714,51.5145042399781,51.5145458084146,51.5145612191587,51.5145938592689,51.514581130254,51.5146055484873,51.5158344922564,51.5151947768411,51.515148910154,51.514818276315,51.5148434841345,51.5149136908635,51.5144955261107,51.5147432533526,51.5144670343971,51.514453057596,51.5148446763327,51.5143888129264,51.5143992425991,51.5143350546395,51.5142241938589,51.5142200496112,51.5141451611806,51.5141081200325,51.5143589918305,51.5143258278403,51.5145439352589,51.5145694098648,51.5145860585039,51.5146120020105,51.5145748931058,51.5145068922349,51.5142738740676,51.5142925294013,51.5140584415023,51.514147904667,51.5139612895256,51.514026681852,51.514075625164,51.5140955500651,51.5141341964856,51.5140332357038,51.51399639475,51.5139599546022,51.5139447099578,51.5138209431322,51.5139986643176,51.5137949340791,51.5137664510085,51.5137255314975,51.5136915654178,51.5136724428681,51.5136025045006,51.5134817494629,51.5134582133826,51.5134291944654,51.5134042540195,51.5133593215734,51.5133780414208,51.513854511423,51.5138745706323,51.513564922941,51.5136162065225,51.5137422432042,51.5139182142438,51.5137723972996,51.5135021957619,51.5137121442364,51.513643808406,51.5137110723171,51.5140612381261,51.5147479928322,51.5147942645459,51.5145260811066,51.5147058764589,51.5123109173558,51.5119984599128,51.5118557192269],[-0.137930104010558,-0.137883080050043,-0.137852910334902,-0.137811953946547,-0.13776682625895,-0.137536941414194,-0.138200478229867,-0.138045001181023,-0.138276150015847,-0.138223486436163,-0.138337036751987,-0.138562712674585,-0.138425595569866,-0.138378445203786,-0.138337151287555,-0.138645453374908,-0.138697906588005,-0.137924280930384,-0.137864911517368,-0.137811483555299,-0.138761923444541,-0.138798841466148,-0.139044685640647,-0.138969769250852,-0.138863423701818,-0.138752495986867,-0.138808158700832,-0.138856026577997,-0.138886865385659,-0.139239358857342,-0.139321273414791,-0.139315996025543,-0.139615957798045,-0.139719311011435,-0.140073811518465,-0.139094018235715,-0.13969719300269,-0.139327083693065,-0.139317388053158,-0.139186819378375,-0.13903594103458,-0.139209112335763,-0.138427009719529,-0.138624089822381,-0.138095738730479,-0.138034566532032,-0.137983558408747,-0.138064861673808,-0.138193772599653,-0.13781768058354,-0.137655876664111,-0.137584251590895,-0.137650308280313,-0.137449685402355,-0.137375960345323,-0.137327183060384,-0.136979895082568,-0.137180471112416,-0.137052256705603,-0.137695283980724,-0.137532968405366,-0.137419027899659,-0.137367685597074,-0.137324900434833,-0.13753072078947,-0.137561709372639,-0.137465963095969,-0.137386069143822,-0.137305905402978,-0.137088921783477,-0.136996507652827,-0.136858967055843,-0.136777631573641,-0.13670521328998,-0.136493541498875,-0.1363296093128,-0.13642355437644,-0.136523354073943,-0.136599464715498,-0.136698903900388,-0.136818608892988,-0.136972720982157,-0.13635852222683,-0.136629907913101,-0.136584421189908,-0.136422562827327,-0.136345100970831,-0.136437423660872,-0.13637725593617,-0.136196885696964,-0.136141564934112,-0.136101691853672,-0.13603019775476,-0.136309771693643,-0.135940418807579,-0.135857833871398,-0.135800071388929,-0.13571676147881,-0.135119199651659,-0.135144413368991,-0.135393879321116,-0.135409196321426,-0.135472107671099,-0.135765474474457,-0.13587129725092,-0.135975667166644,-0.136032902456437,-0.136115157826193,-0.136180249325612,-0.136083007793062,-0.136139451247873,-0.135328712820307,-0.135122094886835,-0.134644707328384,-0.134521544053972,-0.13496689238324,-0.135098133618687,-0.134393575502607,-0.134505247562517,-0.134436800798234,-0.134593602630156,-0.134640476323922,-0.134708685062981,-0.134756193685838,-0.135244384441936,-0.134897297638676,-0.135157928194478,-0.135344164321286,-0.135063381103534,-0.135800950518772,-0.135761610342889,-0.135740195630197,-0.135644938517451,-0.135601712101864,-0.13550137997266,-0.135832121260455,-0.136048811687163,-0.136139629106658,-0.136227828987915,-0.134999321749233,-0.134792944843084,-0.134896134291146,-0.13499995822671,-0.133482869177093,-0.133265220914633,-0.133296159096638,-0.132933520033842,-0.133998061085642,-0.134041910097202,-0.134156125430805,-0.134091267691142,-0.134272307054501,-0.134220279673234,-0.134704077450268,-0.134782332224299,-0.135010480599383,-0.134923206586314,-0.134884697385023,-0.134212375301518,-0.13413525046192,-0.134364183806531,-0.134446761264503,-0.134479407284249,-0.13465781338051,-0.134367284903915,-0.134178675873201,-0.134159802982986,-0.134068743540174,-0.134085166112154,-0.133821454567768,-0.133922315573705,-0.133849801388977,-0.133725297875756,-0.133745361367268,-0.133675758620499,-0.133563506220195,-0.133466554504968,-0.133392911328955,-0.13447415999148,-0.135259025703631,-0.13539533964416,-0.136022252986943,-0.136804117171357,-0.13658336059377,-0.135652973903524,-0.135577955351805,-0.134859650909087,-0.134689584742692,-0.13481827258339,-0.135703556340337,-0.135561351789002,-0.135648690168136,-0.135415186294267,-0.135576357841223,-0.135356677740601,-0.135475413644982,-0.136226113608836,-0.136328132175019,-0.136222147739477,-0.136117449584061,-0.13603032610347,-0.136266512833731,-0.136421363235172,-0.136934565325728,-0.136930812044807,-0.136799217089535,-0.136779604473422,-0.136695911836955,-0.136712199114799,-0.136123239897924,-0.135958317916009,-0.135882661614175,-0.135787715898289,-0.135849408611936,-0.13600822222389,-0.136098773834616,-0.136169607538601,-0.135485063868566,-0.135374041226318,-0.135581830640019,-0.135679025987977,-0.135814477761582,-0.135904600280311,-0.135992150697614,-0.136216866756181,-0.136578747125891,-0.13667508400121,-0.136764348161167,-0.136876973157585,-0.13695294902936,-0.137230493796608,-0.136650546959065,-0.136502664677893,-0.13736659135294,-0.137421887399464,-0.137472256016921,-0.138300115934668,-0.137362664817636,-0.137995119447203,-0.138139258555061,-0.138239344033771,-0.138271816604014,-0.138082797902251,-0.137911683038597,-0.137707109451447,-0.137107740547768,-0.137064556384258,-0.138473542100727,-0.138123159327677,-0.137762148270563],null,null,"Deaths",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[[51.5133411171264,51.5138759909098,51.5149055726104,51.5123540234819,51.5121388790536,51.5115423185445,51.5100193479995,51.5112952261304],[-0.136667876716997,-0.139586169059145,-0.13967102270027,-0.13162985673562,-0.133594411488385,-0.135919147673632,-0.133961736109809,-0.138198768040845],null,null,"Pumps",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[51.5100193479995,51.5158344922564],"lng":[-0.140073811518465,-0.13162985673562]}},"evals":[],"jsHooks":[]}</script>
<p>The above results in a much nicer map. Is this map informative? What does it tell you about the incidence of cholera and the location of the pumps?</p>
</div>
<div id="some-simple-spatial-analysis" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> Some Simple Spatial Analysis<a href="introduction-to-maps.html#some-simple-spatial-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Despite the simplicity of this map, we can begin to do some spatial analysis. For instance, we could create a <em>heatmap</em>. You have probably seen heatmaps in many different situations before, as they are a popular visualization tool. Heatmaps are created based on a spatial analytical technique called <em>kernel analysis</em>. We will cover this technique in more detail later on. For the time being, it can be illustrated by taking advantage of the <code>leaflet.extras</code> package, which contains a heatmap function. Load the package as follows:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="introduction-to-maps.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;leaflet.extras&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;leaflet.extras&#39;</span>)</span>
<span id="cb99-2"><a href="introduction-to-maps.html#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet.extras)</span></code></pre></div>
<p>Next, create a second leaflet object for this example, and call it <code>m2</code>. Notice that we are using the same <code>setView</code> parameters:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="introduction-to-maps.html#cb100-1" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">leaflet</span>(<span class="at">data =</span> snow_deaths) <span class="sc">%&gt;%</span> </span>
<span id="cb100-2"><a href="introduction-to-maps.html#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setView</span>(<span class="at">lng =</span> <span class="sc">-</span><span class="fl">0.136</span>, </span>
<span id="cb100-3"><a href="introduction-to-maps.html#cb100-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">lat =</span> <span class="fl">51.513</span>, </span>
<span id="cb100-4"><a href="introduction-to-maps.html#cb100-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">zoom =</span> <span class="dv">16</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb100-5"><a href="introduction-to-maps.html#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>()</span></code></pre></div>
<p>Then, add the heatmap. The function used to do this is <code>addHeatmap</code>. We specify the coordinates and the variable for the intensity (i.e., each case in the dataframe is representative of <code>Count</code> deaths at the address). Two parameters are important here, the <code>blur</code> and the <code>radius</code>. If you are working with the R notebook version of the book, experiment changing these parameters:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="introduction-to-maps.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The &#39;addHeatmap&#39; function is making a heat map. We specify the coordinates, </span></span>
<span id="cb101-2"><a href="introduction-to-maps.html#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="co"># same as the block of code above. The &#39;intensity&#39; function sets a numeric value, </span></span>
<span id="cb101-3"><a href="introduction-to-maps.html#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="co"># the &#39;blur&#39; specifies the amount of blur to apply and the &#39;radius&#39; function sets</span></span>
<span id="cb101-4"><a href="introduction-to-maps.html#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="co"># the radius of each point on the heatmap </span></span>
<span id="cb101-5"><a href="introduction-to-maps.html#cb101-5" aria-hidden="true" tabindex="-1"></a>m2 <span class="sc">%&gt;%</span> </span>
<span id="cb101-6"><a href="introduction-to-maps.html#cb101-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addHeatmap</span>(<span class="at">lng =</span> <span class="sc">~</span>long, </span>
<span id="cb101-7"><a href="introduction-to-maps.html#cb101-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">lat =</span> <span class="sc">~</span>lat, </span>
<span id="cb101-8"><a href="introduction-to-maps.html#cb101-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">intensity =</span> <span class="sc">~</span>Count,</span>
<span id="cb101-9"><a href="introduction-to-maps.html#cb101-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">blur =</span> <span class="dv">40</span>, </span>
<span id="cb101-10"><a href="introduction-to-maps.html#cb101-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">max =</span> <span class="dv">1</span>, </span>
<span id="cb101-11"><a href="introduction-to-maps.html#cb101-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">radius =</span> <span class="dv">25</span>)</span></code></pre></div>
<div id="htmlwidget-672957ef8073c0cb5764" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-672957ef8073c0cb5764">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[51.513,-0.136],16,[]],"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addHeatmap","args":[[[51.5134177124172,-0.137930104010558,3],[51.5133613998342,-0.137883080050043,2],[51.5133170489738,-0.137852910334902,1],[51.5132621296606,-0.137811953946547,1],[51.5132039767177,-0.13776682625895,4],[51.5131835520485,-0.137536941414194,2],[51.5133591867692,-0.138200478229867,2],[51.5133280355029,-0.138045001181023,2],[51.5133229578595,-0.138276150015847,3],[51.5134266728971,-0.138223486436163,2],[51.5133811892354,-0.138337036751987,2],[51.5134623424476,-0.138562712674585,1],[51.5132159285183,-0.138425595569866,3],[51.5131694485925,-0.138378445203786,1],[51.5131164749112,-0.138337151287555,4],[51.5132396116239,-0.138645453374908,1],[51.5131644210432,-0.138697906588005,1],[51.5131781841165,-0.137924280930384,1],[51.5131111979614,-0.137864911517368,4],[51.5130554375432,-0.137811483555299,3],[51.5134413327101,-0.138761923444541,2],[51.5135924208041,-0.138798841466148,1],[51.5134023383083,-0.139044685640647,2],[51.5133795728564,-0.138969769250852,2],[51.5134107815111,-0.138863423701818,2],[51.5136414526995,-0.138752495986867,1],[51.5136934269499,-0.138808158700832,1],[51.5137448755457,-0.138856026577997,3],[51.5136761001242,-0.138886865385659,1],[51.513589650219,-0.139239358857342,1],[51.5136630762747,-0.139321273414791,1],[51.5135023127246,-0.139315996025543,1],[51.5135825682104,-0.139615957798045,2],[51.5135413161461,-0.139719311011435,2],[51.5132975437477,-0.140073811518465,1],[51.5132905255639,-0.139094018235715,1],[51.5130133334294,-0.13969719300269,1],[51.5129647596832,-0.139327083693065,1],[51.5128932509875,-0.139317388053158,2],[51.5129641586053,-0.139186819378375,8],[51.5130248397129,-0.13903594103458,2],[51.5130266757898,-0.139209112335763,1],[51.5128309621333,-0.138427009719529,1],[51.5128845609982,-0.138624089822381,1],[51.512526461566,-0.138095738730479,1],[51.5124652322484,-0.138034566532032,1],[51.5124282017241,-0.137983558408747,4],[51.5124146502324,-0.138064861673808,1],[51.5125095595528,-0.138193772599653,1],[51.5123779695186,-0.13781768058354,1],[51.5124468842647,-0.137655876664111,1],[51.5124910903494,-0.137584251590895,4],[51.5123735237671,-0.137650308280313,1],[51.5123394658191,-0.137449685402355,1],[51.5123641435114,-0.137375960345323,1],[51.5123186592339,-0.137327183060384,1],[51.5125404192213,-0.136979895082568,1],[51.5126486001691,-0.137180471112416,2],[51.5126924102854,-0.137052256705603,1],[51.5129565492695,-0.137695283980724,1],[51.5127646786194,-0.137532968405366,1],[51.512780135276,-0.137419027899659,2],[51.5127261821783,-0.137367685597074,1],[51.5126812212502,-0.137324900434833,1],[51.5129138940919,-0.13753072078947,2],[51.5130464173057,-0.137561709372639,2],[51.5130736199273,-0.137465963095969,1],[51.5130871653118,-0.137386069143822,2],[51.5131217300639,-0.137305905402978,3],[51.5131870380734,-0.137088921783477,1],[51.5132144650686,-0.136996507652827,4],[51.5132493670279,-0.136858967055843,15],[51.5132712298232,-0.136777631573641,3],[51.5133000053292,-0.13670521328998,4],[51.513159501803,-0.136493541498875,5],[51.5130159068474,-0.1363296093128,2],[51.5129212632447,-0.13642355437644,1],[51.5128901273703,-0.136523354073943,2],[51.5128594972903,-0.136599464715498,1],[51.5128304407162,-0.136698903900388,1],[51.5127817133823,-0.136818608892988,1],[51.5127289953887,-0.136972720982157,1],[51.5128684899971,-0.13635852222683,1],[51.5127227024346,-0.136629907913101,1],[51.5126544175993,-0.136584421189908,1],[51.5127129238493,-0.136422562827327,1],[51.5126151331328,-0.136345100970831,1],[51.5124909274326,-0.136437423660872,1],[51.512449001123,-0.13637725593617,1],[51.5124646732061,-0.136196885696964,1],[51.5124131425941,-0.136141564934112,1],[51.5123580283144,-0.136101691853672,2],[51.5122714848582,-0.13603019775476,1],[51.5123551037207,-0.136309771693643,1],[51.5119909705128,-0.135940418807579,4],[51.5120825390407,-0.135857833871398,2],[51.5120308435294,-0.135800071388929,1],[51.511969715045,-0.13571676147881,4],[51.5118816026324,-0.135119199651659,4],[51.5120498288562,-0.135144413368991,1],[51.5122501450068,-0.135393879321116,4],[51.5121617481752,-0.135409196321426,1],[51.5122122493473,-0.135472107671099,1],[51.5125728000174,-0.135765474474457,2],[51.5125753130745,-0.13587129725092,1],[51.512671783869,-0.135975667166644,2],[51.5127265275065,-0.136032902456437,3],[51.5127937521836,-0.136115157826193,1],[51.5128459418976,-0.136180249325612,4],[51.5128794716827,-0.136083007793062,1],[51.5129387875413,-0.136139451247873,1],[51.5127652622967,-0.135328712820307,7],[51.5128439493493,-0.135122094886835,3],[51.5125320092663,-0.134644707328384,8],[51.5121976542315,-0.134521544053972,1],[51.5122147337627,-0.13496689238324,1],[51.5131535576567,-0.135098133618687,5],[51.5130560038467,-0.134393575502607,8],[51.5131654276186,-0.134505247562517,2],[51.5130978234435,-0.134436800798234,1],[51.5132380800188,-0.134593602630156,1],[51.5132931133948,-0.134640476323922,2],[51.5133792266715,-0.134708685062981,1],[51.5134305977733,-0.134756193685838,2],[51.5134746492998,-0.135244384441936,2],[51.513421592435,-0.134897297638676,3],[51.5135280975109,-0.135157928194478,1],[51.513481380808,-0.135344164321286,2],[51.5135939675143,-0.135063381103534,2],[51.5132269067679,-0.135800950518772,3],[51.5131797922196,-0.135761610342889,1],[51.5131320343792,-0.135740195630197,2],[51.5130478021104,-0.135644938517451,1],[51.5130059829172,-0.135601712101864,1],[51.5128825050525,-0.13550137997266,1],[51.5132697651429,-0.135832121260455,1],[51.5134585203029,-0.136048811687163,3],[51.513431301037,-0.136139629106658,3],[51.5134020526073,-0.136227828987915,3],[51.5125929850428,-0.134999321749233,3],[51.5125846188892,-0.134792944843084,1],[51.5125545302918,-0.134896134291146,2],[51.5125207793547,-0.13499995822671,1],[51.5131371982402,-0.133482869177093,1],[51.513228105499,-0.133265220914633,1],[51.5131523869471,-0.133296159096638,2],[51.5132575922725,-0.132933520033842,1],[51.5135441147158,-0.133998061085642,1],[51.5136261147011,-0.134041910097202,1],[51.51363711464,-0.134156125430805,2],[51.5135240566799,-0.134091267691142,2],[51.513819503245,-0.134272307054501,1],[51.5137237779958,-0.134220279673234,1],[51.5137037259797,-0.134704077450268,1],[51.5138308609666,-0.134782332224299,1],[51.5139154145108,-0.135010480599383,1],[51.5135966548401,-0.134923206586314,1],[51.5140320770328,-0.134884697385023,1],[51.5138912073965,-0.134212375301518,5],[51.5137575614511,-0.13413525046192,1],[51.5140647728081,-0.134364183806531,1],[51.5141461334489,-0.134446761264503,2],[51.5142009244163,-0.134479407284249,2],[51.5142299752522,-0.13465781338051,1],[51.5143186433979,-0.134367284903915,1],[51.5143770664962,-0.134178675873201,1],[51.5143572324987,-0.134159802982986,1],[51.5143820227307,-0.134068743540174,2],[51.5144016914121,-0.134085166112154,2],[51.5145215552817,-0.133821454567768,5],[51.5144974265937,-0.133922315573705,1],[51.5144724263714,-0.133849801388977,1],[51.5145042399781,-0.133725297875756,1],[51.5145458084146,-0.133745361367268,1],[51.5145612191587,-0.133675758620499,4],[51.5145938592689,-0.133563506220195,1],[51.514581130254,-0.133466554504968,2],[51.5146055484873,-0.133392911328955,1],[51.5158344922564,-0.13447415999148,1],[51.5151947768411,-0.135259025703631,1],[51.515148910154,-0.13539533964416,1],[51.514818276315,-0.136022252986943,1],[51.5148434841345,-0.136804117171357,3],[51.5149136908635,-0.13658336059377,1],[51.5144955261107,-0.135652973903524,1],[51.5147432533526,-0.135577955351805,2],[51.5144670343971,-0.134859650909087,1],[51.514453057596,-0.134689584742692,1],[51.5148446763327,-0.13481827258339,1],[51.5143888129264,-0.135703556340337,1],[51.5143992425991,-0.135561351789002,1],[51.5143350546395,-0.135648690168136,2],[51.5142241938589,-0.135415186294267,1],[51.5142200496112,-0.135576357841223,1],[51.5141451611806,-0.135356677740601,2],[51.5141081200325,-0.135475413644982,3],[51.5143589918305,-0.136226113608836,2],[51.5143258278403,-0.136328132175019,1],[51.5145439352589,-0.136222147739477,1],[51.5145694098648,-0.136117449584061,1],[51.5145860585039,-0.13603032610347,1],[51.5146120020105,-0.136266512833731,1],[51.5145748931058,-0.136421363235172,2],[51.5145068922349,-0.136934565325728,3],[51.5142738740676,-0.136930812044807,3],[51.5142925294013,-0.136799217089535,1],[51.5140584415023,-0.136779604473422,1],[51.514147904667,-0.136695911836955,3],[51.5139612895256,-0.136712199114799,1],[51.514026681852,-0.136123239897924,1],[51.514075625164,-0.135958317916009,1],[51.5140955500651,-0.135882661614175,1],[51.5141341964856,-0.135787715898289,2],[51.5140332357038,-0.135849408611936,2],[51.51399639475,-0.13600822222389,4],[51.5139599546022,-0.136098773834616,5],[51.5139447099578,-0.136169607538601,2],[51.5138209431322,-0.135485063868566,5],[51.5139986643176,-0.135374041226318,5],[51.5137949340791,-0.135581830640019,3],[51.5137664510085,-0.135679025987977,3],[51.5137255314975,-0.135814477761582,1],[51.5136915654178,-0.135904600280311,5],[51.5136724428681,-0.135992150697614,4],[51.5136025045006,-0.136216866756181,4],[51.5134817494629,-0.136578747125891,1],[51.5134582133826,-0.13667508400121,4],[51.5134291944654,-0.136764348161167,1],[51.5134042540195,-0.136876973157585,3],[51.5133593215734,-0.13695294902936,2],[51.5133780414208,-0.137230493796608,1],[51.513854511423,-0.136650546959065,2],[51.5138745706323,-0.136502664677893,1],[51.513564922941,-0.13736659135294,1],[51.5136162065225,-0.137421887399464,2],[51.5137422432042,-0.137472256016921,3],[51.5139182142438,-0.138300115934668,1],[51.5137723972996,-0.137362664817636,1],[51.5135021957619,-0.137995119447203,4],[51.5137121442364,-0.138139258555061,2],[51.513643808406,-0.138239344033771,2],[51.5137110723171,-0.138271816604014,1],[51.5140612381261,-0.138082797902251,5],[51.5147479928322,-0.137911683038597,3],[51.5147942645459,-0.137707109451447,2],[51.5145260811066,-0.137107740547768,3],[51.5147058764589,-0.137064556384258,2],[51.5123109173558,-0.138473542100727,1],[51.5119984599128,-0.138123159327677,1],[51.5118557192269,-0.137762148270563,1]],null,null,{"minOpacity":0.05,"max":1,"radius":25,"blur":40}]}],"limits":{"lat":[51.5118557192269,51.5158344922564],"lng":[-0.140073811518465,-0.132933520033842]}},"evals":[],"jsHooks":[]}</script>
<p>Lastly, you can also add markers for the pumps as follows:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="introduction-to-maps.html#cb102-1" aria-hidden="true" tabindex="-1"></a>m2 <span class="sc">%&gt;%</span> <span class="fu">addHeatmap</span>(<span class="at">lng =</span> <span class="sc">~</span>long, </span>
<span id="cb102-2"><a href="introduction-to-maps.html#cb102-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">lat =</span> <span class="sc">~</span>lat, </span>
<span id="cb102-3"><a href="introduction-to-maps.html#cb102-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">intensity =</span> <span class="sc">~</span>Count,</span>
<span id="cb102-4"><a href="introduction-to-maps.html#cb102-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">blur =</span> <span class="dv">40</span>, </span>
<span id="cb102-5"><a href="introduction-to-maps.html#cb102-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">max =</span> <span class="dv">1</span>, </span>
<span id="cb102-6"><a href="introduction-to-maps.html#cb102-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">radius =</span> <span class="dv">25</span>) <span class="sc">%&gt;%</span></span>
<span id="cb102-7"><a href="introduction-to-maps.html#cb102-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">data =</span> snow_pumps, </span>
<span id="cb102-8"><a href="introduction-to-maps.html#cb102-8" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>long, </span>
<span id="cb102-9"><a href="introduction-to-maps.html#cb102-9" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>lat, </span>
<span id="cb102-10"><a href="introduction-to-maps.html#cb102-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">&quot;Pumps&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-184514449f2cbf5de9e1" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-184514449f2cbf5de9e1">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[51.513,-0.136],16,[]],"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addHeatmap","args":[[[51.5134177124172,-0.137930104010558,3],[51.5133613998342,-0.137883080050043,2],[51.5133170489738,-0.137852910334902,1],[51.5132621296606,-0.137811953946547,1],[51.5132039767177,-0.13776682625895,4],[51.5131835520485,-0.137536941414194,2],[51.5133591867692,-0.138200478229867,2],[51.5133280355029,-0.138045001181023,2],[51.5133229578595,-0.138276150015847,3],[51.5134266728971,-0.138223486436163,2],[51.5133811892354,-0.138337036751987,2],[51.5134623424476,-0.138562712674585,1],[51.5132159285183,-0.138425595569866,3],[51.5131694485925,-0.138378445203786,1],[51.5131164749112,-0.138337151287555,4],[51.5132396116239,-0.138645453374908,1],[51.5131644210432,-0.138697906588005,1],[51.5131781841165,-0.137924280930384,1],[51.5131111979614,-0.137864911517368,4],[51.5130554375432,-0.137811483555299,3],[51.5134413327101,-0.138761923444541,2],[51.5135924208041,-0.138798841466148,1],[51.5134023383083,-0.139044685640647,2],[51.5133795728564,-0.138969769250852,2],[51.5134107815111,-0.138863423701818,2],[51.5136414526995,-0.138752495986867,1],[51.5136934269499,-0.138808158700832,1],[51.5137448755457,-0.138856026577997,3],[51.5136761001242,-0.138886865385659,1],[51.513589650219,-0.139239358857342,1],[51.5136630762747,-0.139321273414791,1],[51.5135023127246,-0.139315996025543,1],[51.5135825682104,-0.139615957798045,2],[51.5135413161461,-0.139719311011435,2],[51.5132975437477,-0.140073811518465,1],[51.5132905255639,-0.139094018235715,1],[51.5130133334294,-0.13969719300269,1],[51.5129647596832,-0.139327083693065,1],[51.5128932509875,-0.139317388053158,2],[51.5129641586053,-0.139186819378375,8],[51.5130248397129,-0.13903594103458,2],[51.5130266757898,-0.139209112335763,1],[51.5128309621333,-0.138427009719529,1],[51.5128845609982,-0.138624089822381,1],[51.512526461566,-0.138095738730479,1],[51.5124652322484,-0.138034566532032,1],[51.5124282017241,-0.137983558408747,4],[51.5124146502324,-0.138064861673808,1],[51.5125095595528,-0.138193772599653,1],[51.5123779695186,-0.13781768058354,1],[51.5124468842647,-0.137655876664111,1],[51.5124910903494,-0.137584251590895,4],[51.5123735237671,-0.137650308280313,1],[51.5123394658191,-0.137449685402355,1],[51.5123641435114,-0.137375960345323,1],[51.5123186592339,-0.137327183060384,1],[51.5125404192213,-0.136979895082568,1],[51.5126486001691,-0.137180471112416,2],[51.5126924102854,-0.137052256705603,1],[51.5129565492695,-0.137695283980724,1],[51.5127646786194,-0.137532968405366,1],[51.512780135276,-0.137419027899659,2],[51.5127261821783,-0.137367685597074,1],[51.5126812212502,-0.137324900434833,1],[51.5129138940919,-0.13753072078947,2],[51.5130464173057,-0.137561709372639,2],[51.5130736199273,-0.137465963095969,1],[51.5130871653118,-0.137386069143822,2],[51.5131217300639,-0.137305905402978,3],[51.5131870380734,-0.137088921783477,1],[51.5132144650686,-0.136996507652827,4],[51.5132493670279,-0.136858967055843,15],[51.5132712298232,-0.136777631573641,3],[51.5133000053292,-0.13670521328998,4],[51.513159501803,-0.136493541498875,5],[51.5130159068474,-0.1363296093128,2],[51.5129212632447,-0.13642355437644,1],[51.5128901273703,-0.136523354073943,2],[51.5128594972903,-0.136599464715498,1],[51.5128304407162,-0.136698903900388,1],[51.5127817133823,-0.136818608892988,1],[51.5127289953887,-0.136972720982157,1],[51.5128684899971,-0.13635852222683,1],[51.5127227024346,-0.136629907913101,1],[51.5126544175993,-0.136584421189908,1],[51.5127129238493,-0.136422562827327,1],[51.5126151331328,-0.136345100970831,1],[51.5124909274326,-0.136437423660872,1],[51.512449001123,-0.13637725593617,1],[51.5124646732061,-0.136196885696964,1],[51.5124131425941,-0.136141564934112,1],[51.5123580283144,-0.136101691853672,2],[51.5122714848582,-0.13603019775476,1],[51.5123551037207,-0.136309771693643,1],[51.5119909705128,-0.135940418807579,4],[51.5120825390407,-0.135857833871398,2],[51.5120308435294,-0.135800071388929,1],[51.511969715045,-0.13571676147881,4],[51.5118816026324,-0.135119199651659,4],[51.5120498288562,-0.135144413368991,1],[51.5122501450068,-0.135393879321116,4],[51.5121617481752,-0.135409196321426,1],[51.5122122493473,-0.135472107671099,1],[51.5125728000174,-0.135765474474457,2],[51.5125753130745,-0.13587129725092,1],[51.512671783869,-0.135975667166644,2],[51.5127265275065,-0.136032902456437,3],[51.5127937521836,-0.136115157826193,1],[51.5128459418976,-0.136180249325612,4],[51.5128794716827,-0.136083007793062,1],[51.5129387875413,-0.136139451247873,1],[51.5127652622967,-0.135328712820307,7],[51.5128439493493,-0.135122094886835,3],[51.5125320092663,-0.134644707328384,8],[51.5121976542315,-0.134521544053972,1],[51.5122147337627,-0.13496689238324,1],[51.5131535576567,-0.135098133618687,5],[51.5130560038467,-0.134393575502607,8],[51.5131654276186,-0.134505247562517,2],[51.5130978234435,-0.134436800798234,1],[51.5132380800188,-0.134593602630156,1],[51.5132931133948,-0.134640476323922,2],[51.5133792266715,-0.134708685062981,1],[51.5134305977733,-0.134756193685838,2],[51.5134746492998,-0.135244384441936,2],[51.513421592435,-0.134897297638676,3],[51.5135280975109,-0.135157928194478,1],[51.513481380808,-0.135344164321286,2],[51.5135939675143,-0.135063381103534,2],[51.5132269067679,-0.135800950518772,3],[51.5131797922196,-0.135761610342889,1],[51.5131320343792,-0.135740195630197,2],[51.5130478021104,-0.135644938517451,1],[51.5130059829172,-0.135601712101864,1],[51.5128825050525,-0.13550137997266,1],[51.5132697651429,-0.135832121260455,1],[51.5134585203029,-0.136048811687163,3],[51.513431301037,-0.136139629106658,3],[51.5134020526073,-0.136227828987915,3],[51.5125929850428,-0.134999321749233,3],[51.5125846188892,-0.134792944843084,1],[51.5125545302918,-0.134896134291146,2],[51.5125207793547,-0.13499995822671,1],[51.5131371982402,-0.133482869177093,1],[51.513228105499,-0.133265220914633,1],[51.5131523869471,-0.133296159096638,2],[51.5132575922725,-0.132933520033842,1],[51.5135441147158,-0.133998061085642,1],[51.5136261147011,-0.134041910097202,1],[51.51363711464,-0.134156125430805,2],[51.5135240566799,-0.134091267691142,2],[51.513819503245,-0.134272307054501,1],[51.5137237779958,-0.134220279673234,1],[51.5137037259797,-0.134704077450268,1],[51.5138308609666,-0.134782332224299,1],[51.5139154145108,-0.135010480599383,1],[51.5135966548401,-0.134923206586314,1],[51.5140320770328,-0.134884697385023,1],[51.5138912073965,-0.134212375301518,5],[51.5137575614511,-0.13413525046192,1],[51.5140647728081,-0.134364183806531,1],[51.5141461334489,-0.134446761264503,2],[51.5142009244163,-0.134479407284249,2],[51.5142299752522,-0.13465781338051,1],[51.5143186433979,-0.134367284903915,1],[51.5143770664962,-0.134178675873201,1],[51.5143572324987,-0.134159802982986,1],[51.5143820227307,-0.134068743540174,2],[51.5144016914121,-0.134085166112154,2],[51.5145215552817,-0.133821454567768,5],[51.5144974265937,-0.133922315573705,1],[51.5144724263714,-0.133849801388977,1],[51.5145042399781,-0.133725297875756,1],[51.5145458084146,-0.133745361367268,1],[51.5145612191587,-0.133675758620499,4],[51.5145938592689,-0.133563506220195,1],[51.514581130254,-0.133466554504968,2],[51.5146055484873,-0.133392911328955,1],[51.5158344922564,-0.13447415999148,1],[51.5151947768411,-0.135259025703631,1],[51.515148910154,-0.13539533964416,1],[51.514818276315,-0.136022252986943,1],[51.5148434841345,-0.136804117171357,3],[51.5149136908635,-0.13658336059377,1],[51.5144955261107,-0.135652973903524,1],[51.5147432533526,-0.135577955351805,2],[51.5144670343971,-0.134859650909087,1],[51.514453057596,-0.134689584742692,1],[51.5148446763327,-0.13481827258339,1],[51.5143888129264,-0.135703556340337,1],[51.5143992425991,-0.135561351789002,1],[51.5143350546395,-0.135648690168136,2],[51.5142241938589,-0.135415186294267,1],[51.5142200496112,-0.135576357841223,1],[51.5141451611806,-0.135356677740601,2],[51.5141081200325,-0.135475413644982,3],[51.5143589918305,-0.136226113608836,2],[51.5143258278403,-0.136328132175019,1],[51.5145439352589,-0.136222147739477,1],[51.5145694098648,-0.136117449584061,1],[51.5145860585039,-0.13603032610347,1],[51.5146120020105,-0.136266512833731,1],[51.5145748931058,-0.136421363235172,2],[51.5145068922349,-0.136934565325728,3],[51.5142738740676,-0.136930812044807,3],[51.5142925294013,-0.136799217089535,1],[51.5140584415023,-0.136779604473422,1],[51.514147904667,-0.136695911836955,3],[51.5139612895256,-0.136712199114799,1],[51.514026681852,-0.136123239897924,1],[51.514075625164,-0.135958317916009,1],[51.5140955500651,-0.135882661614175,1],[51.5141341964856,-0.135787715898289,2],[51.5140332357038,-0.135849408611936,2],[51.51399639475,-0.13600822222389,4],[51.5139599546022,-0.136098773834616,5],[51.5139447099578,-0.136169607538601,2],[51.5138209431322,-0.135485063868566,5],[51.5139986643176,-0.135374041226318,5],[51.5137949340791,-0.135581830640019,3],[51.5137664510085,-0.135679025987977,3],[51.5137255314975,-0.135814477761582,1],[51.5136915654178,-0.135904600280311,5],[51.5136724428681,-0.135992150697614,4],[51.5136025045006,-0.136216866756181,4],[51.5134817494629,-0.136578747125891,1],[51.5134582133826,-0.13667508400121,4],[51.5134291944654,-0.136764348161167,1],[51.5134042540195,-0.136876973157585,3],[51.5133593215734,-0.13695294902936,2],[51.5133780414208,-0.137230493796608,1],[51.513854511423,-0.136650546959065,2],[51.5138745706323,-0.136502664677893,1],[51.513564922941,-0.13736659135294,1],[51.5136162065225,-0.137421887399464,2],[51.5137422432042,-0.137472256016921,3],[51.5139182142438,-0.138300115934668,1],[51.5137723972996,-0.137362664817636,1],[51.5135021957619,-0.137995119447203,4],[51.5137121442364,-0.138139258555061,2],[51.513643808406,-0.138239344033771,2],[51.5137110723171,-0.138271816604014,1],[51.5140612381261,-0.138082797902251,5],[51.5147479928322,-0.137911683038597,3],[51.5147942645459,-0.137707109451447,2],[51.5145260811066,-0.137107740547768,3],[51.5147058764589,-0.137064556384258,2],[51.5123109173558,-0.138473542100727,1],[51.5119984599128,-0.138123159327677,1],[51.5118557192269,-0.137762148270563,1]],null,null,{"minOpacity":0.05,"max":1,"radius":25,"blur":40}]},{"method":"addMarkers","args":[[51.5133411171264,51.5138759909098,51.5149055726104,51.5123540234819,51.5121388790536,51.5115423185445,51.5100193479995,51.5112952261304],[-0.136667876716997,-0.139586169059145,-0.13967102270027,-0.13162985673562,-0.133594411488385,-0.135919147673632,-0.133961736109809,-0.138198768040845],null,null,"Pumps",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[51.5100193479995,51.5158344922564],"lng":[-0.140073811518465,-0.13162985673562]}},"evals":[],"jsHooks":[]}</script>
<p>And everything together:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="introduction-to-maps.html#cb103-1" aria-hidden="true" tabindex="-1"></a>m2_test <span class="ot">&lt;-</span> <span class="fu">leaflet</span>(<span class="at">data =</span> snow_deaths) <span class="sc">%&gt;%</span></span>
<span id="cb103-2"><a href="introduction-to-maps.html#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setView</span>(<span class="at">lng =</span> <span class="sc">-</span><span class="fl">0.136</span>, </span>
<span id="cb103-3"><a href="introduction-to-maps.html#cb103-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">lat =</span> <span class="fl">51.513</span>, </span>
<span id="cb103-4"><a href="introduction-to-maps.html#cb103-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">zoom =</span> <span class="dv">16</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb103-5"><a href="introduction-to-maps.html#cb103-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb103-6"><a href="introduction-to-maps.html#cb103-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addHeatmap</span>(<span class="at">lng =</span> <span class="sc">~</span>long,</span>
<span id="cb103-7"><a href="introduction-to-maps.html#cb103-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">lat =</span> <span class="sc">~</span>lat, </span>
<span id="cb103-8"><a href="introduction-to-maps.html#cb103-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">intensity =</span> <span class="sc">~</span>Count,</span>
<span id="cb103-9"><a href="introduction-to-maps.html#cb103-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">blur =</span> <span class="dv">40</span>, </span>
<span id="cb103-10"><a href="introduction-to-maps.html#cb103-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">max =</span> <span class="dv">1</span>, </span>
<span id="cb103-11"><a href="introduction-to-maps.html#cb103-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">radius =</span> <span class="dv">25</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb103-12"><a href="introduction-to-maps.html#cb103-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">data =</span> snow_deaths, </span>
<span id="cb103-13"><a href="introduction-to-maps.html#cb103-13" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>long, </span>
<span id="cb103-14"><a href="introduction-to-maps.html#cb103-14" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>lat, </span>
<span id="cb103-15"><a href="introduction-to-maps.html#cb103-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">clusterOptions =</span> <span class="fu">markerClusterOptions</span>(), </span>
<span id="cb103-16"><a href="introduction-to-maps.html#cb103-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">&quot;Deaths&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb103-17"><a href="introduction-to-maps.html#cb103-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">data =</span> snow_pumps,</span>
<span id="cb103-18"><a href="introduction-to-maps.html#cb103-18" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>long, </span>
<span id="cb103-19"><a href="introduction-to-maps.html#cb103-19" aria-hidden="true" tabindex="-1"></a>             <span class="sc">~</span>lat, </span>
<span id="cb103-20"><a href="introduction-to-maps.html#cb103-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">&quot;Pumps&quot;</span>)</span>
<span id="cb103-21"><a href="introduction-to-maps.html#cb103-21" aria-hidden="true" tabindex="-1"></a>m2_test</span></code></pre></div>
<div id="htmlwidget-8e59e4e2036580b54285" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-8e59e4e2036580b54285">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[51.513,-0.136],16,[]],"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addHeatmap","args":[[[51.5134177124172,-0.137930104010558,3],[51.5133613998342,-0.137883080050043,2],[51.5133170489738,-0.137852910334902,1],[51.5132621296606,-0.137811953946547,1],[51.5132039767177,-0.13776682625895,4],[51.5131835520485,-0.137536941414194,2],[51.5133591867692,-0.138200478229867,2],[51.5133280355029,-0.138045001181023,2],[51.5133229578595,-0.138276150015847,3],[51.5134266728971,-0.138223486436163,2],[51.5133811892354,-0.138337036751987,2],[51.5134623424476,-0.138562712674585,1],[51.5132159285183,-0.138425595569866,3],[51.5131694485925,-0.138378445203786,1],[51.5131164749112,-0.138337151287555,4],[51.5132396116239,-0.138645453374908,1],[51.5131644210432,-0.138697906588005,1],[51.5131781841165,-0.137924280930384,1],[51.5131111979614,-0.137864911517368,4],[51.5130554375432,-0.137811483555299,3],[51.5134413327101,-0.138761923444541,2],[51.5135924208041,-0.138798841466148,1],[51.5134023383083,-0.139044685640647,2],[51.5133795728564,-0.138969769250852,2],[51.5134107815111,-0.138863423701818,2],[51.5136414526995,-0.138752495986867,1],[51.5136934269499,-0.138808158700832,1],[51.5137448755457,-0.138856026577997,3],[51.5136761001242,-0.138886865385659,1],[51.513589650219,-0.139239358857342,1],[51.5136630762747,-0.139321273414791,1],[51.5135023127246,-0.139315996025543,1],[51.5135825682104,-0.139615957798045,2],[51.5135413161461,-0.139719311011435,2],[51.5132975437477,-0.140073811518465,1],[51.5132905255639,-0.139094018235715,1],[51.5130133334294,-0.13969719300269,1],[51.5129647596832,-0.139327083693065,1],[51.5128932509875,-0.139317388053158,2],[51.5129641586053,-0.139186819378375,8],[51.5130248397129,-0.13903594103458,2],[51.5130266757898,-0.139209112335763,1],[51.5128309621333,-0.138427009719529,1],[51.5128845609982,-0.138624089822381,1],[51.512526461566,-0.138095738730479,1],[51.5124652322484,-0.138034566532032,1],[51.5124282017241,-0.137983558408747,4],[51.5124146502324,-0.138064861673808,1],[51.5125095595528,-0.138193772599653,1],[51.5123779695186,-0.13781768058354,1],[51.5124468842647,-0.137655876664111,1],[51.5124910903494,-0.137584251590895,4],[51.5123735237671,-0.137650308280313,1],[51.5123394658191,-0.137449685402355,1],[51.5123641435114,-0.137375960345323,1],[51.5123186592339,-0.137327183060384,1],[51.5125404192213,-0.136979895082568,1],[51.5126486001691,-0.137180471112416,2],[51.5126924102854,-0.137052256705603,1],[51.5129565492695,-0.137695283980724,1],[51.5127646786194,-0.137532968405366,1],[51.512780135276,-0.137419027899659,2],[51.5127261821783,-0.137367685597074,1],[51.5126812212502,-0.137324900434833,1],[51.5129138940919,-0.13753072078947,2],[51.5130464173057,-0.137561709372639,2],[51.5130736199273,-0.137465963095969,1],[51.5130871653118,-0.137386069143822,2],[51.5131217300639,-0.137305905402978,3],[51.5131870380734,-0.137088921783477,1],[51.5132144650686,-0.136996507652827,4],[51.5132493670279,-0.136858967055843,15],[51.5132712298232,-0.136777631573641,3],[51.5133000053292,-0.13670521328998,4],[51.513159501803,-0.136493541498875,5],[51.5130159068474,-0.1363296093128,2],[51.5129212632447,-0.13642355437644,1],[51.5128901273703,-0.136523354073943,2],[51.5128594972903,-0.136599464715498,1],[51.5128304407162,-0.136698903900388,1],[51.5127817133823,-0.136818608892988,1],[51.5127289953887,-0.136972720982157,1],[51.5128684899971,-0.13635852222683,1],[51.5127227024346,-0.136629907913101,1],[51.5126544175993,-0.136584421189908,1],[51.5127129238493,-0.136422562827327,1],[51.5126151331328,-0.136345100970831,1],[51.5124909274326,-0.136437423660872,1],[51.512449001123,-0.13637725593617,1],[51.5124646732061,-0.136196885696964,1],[51.5124131425941,-0.136141564934112,1],[51.5123580283144,-0.136101691853672,2],[51.5122714848582,-0.13603019775476,1],[51.5123551037207,-0.136309771693643,1],[51.5119909705128,-0.135940418807579,4],[51.5120825390407,-0.135857833871398,2],[51.5120308435294,-0.135800071388929,1],[51.511969715045,-0.13571676147881,4],[51.5118816026324,-0.135119199651659,4],[51.5120498288562,-0.135144413368991,1],[51.5122501450068,-0.135393879321116,4],[51.5121617481752,-0.135409196321426,1],[51.5122122493473,-0.135472107671099,1],[51.5125728000174,-0.135765474474457,2],[51.5125753130745,-0.13587129725092,1],[51.512671783869,-0.135975667166644,2],[51.5127265275065,-0.136032902456437,3],[51.5127937521836,-0.136115157826193,1],[51.5128459418976,-0.136180249325612,4],[51.5128794716827,-0.136083007793062,1],[51.5129387875413,-0.136139451247873,1],[51.5127652622967,-0.135328712820307,7],[51.5128439493493,-0.135122094886835,3],[51.5125320092663,-0.134644707328384,8],[51.5121976542315,-0.134521544053972,1],[51.5122147337627,-0.13496689238324,1],[51.5131535576567,-0.135098133618687,5],[51.5130560038467,-0.134393575502607,8],[51.5131654276186,-0.134505247562517,2],[51.5130978234435,-0.134436800798234,1],[51.5132380800188,-0.134593602630156,1],[51.5132931133948,-0.134640476323922,2],[51.5133792266715,-0.134708685062981,1],[51.5134305977733,-0.134756193685838,2],[51.5134746492998,-0.135244384441936,2],[51.513421592435,-0.134897297638676,3],[51.5135280975109,-0.135157928194478,1],[51.513481380808,-0.135344164321286,2],[51.5135939675143,-0.135063381103534,2],[51.5132269067679,-0.135800950518772,3],[51.5131797922196,-0.135761610342889,1],[51.5131320343792,-0.135740195630197,2],[51.5130478021104,-0.135644938517451,1],[51.5130059829172,-0.135601712101864,1],[51.5128825050525,-0.13550137997266,1],[51.5132697651429,-0.135832121260455,1],[51.5134585203029,-0.136048811687163,3],[51.513431301037,-0.136139629106658,3],[51.5134020526073,-0.136227828987915,3],[51.5125929850428,-0.134999321749233,3],[51.5125846188892,-0.134792944843084,1],[51.5125545302918,-0.134896134291146,2],[51.5125207793547,-0.13499995822671,1],[51.5131371982402,-0.133482869177093,1],[51.513228105499,-0.133265220914633,1],[51.5131523869471,-0.133296159096638,2],[51.5132575922725,-0.132933520033842,1],[51.5135441147158,-0.133998061085642,1],[51.5136261147011,-0.134041910097202,1],[51.51363711464,-0.134156125430805,2],[51.5135240566799,-0.134091267691142,2],[51.513819503245,-0.134272307054501,1],[51.5137237779958,-0.134220279673234,1],[51.5137037259797,-0.134704077450268,1],[51.5138308609666,-0.134782332224299,1],[51.5139154145108,-0.135010480599383,1],[51.5135966548401,-0.134923206586314,1],[51.5140320770328,-0.134884697385023,1],[51.5138912073965,-0.134212375301518,5],[51.5137575614511,-0.13413525046192,1],[51.5140647728081,-0.134364183806531,1],[51.5141461334489,-0.134446761264503,2],[51.5142009244163,-0.134479407284249,2],[51.5142299752522,-0.13465781338051,1],[51.5143186433979,-0.134367284903915,1],[51.5143770664962,-0.134178675873201,1],[51.5143572324987,-0.134159802982986,1],[51.5143820227307,-0.134068743540174,2],[51.5144016914121,-0.134085166112154,2],[51.5145215552817,-0.133821454567768,5],[51.5144974265937,-0.133922315573705,1],[51.5144724263714,-0.133849801388977,1],[51.5145042399781,-0.133725297875756,1],[51.5145458084146,-0.133745361367268,1],[51.5145612191587,-0.133675758620499,4],[51.5145938592689,-0.133563506220195,1],[51.514581130254,-0.133466554504968,2],[51.5146055484873,-0.133392911328955,1],[51.5158344922564,-0.13447415999148,1],[51.5151947768411,-0.135259025703631,1],[51.515148910154,-0.13539533964416,1],[51.514818276315,-0.136022252986943,1],[51.5148434841345,-0.136804117171357,3],[51.5149136908635,-0.13658336059377,1],[51.5144955261107,-0.135652973903524,1],[51.5147432533526,-0.135577955351805,2],[51.5144670343971,-0.134859650909087,1],[51.514453057596,-0.134689584742692,1],[51.5148446763327,-0.13481827258339,1],[51.5143888129264,-0.135703556340337,1],[51.5143992425991,-0.135561351789002,1],[51.5143350546395,-0.135648690168136,2],[51.5142241938589,-0.135415186294267,1],[51.5142200496112,-0.135576357841223,1],[51.5141451611806,-0.135356677740601,2],[51.5141081200325,-0.135475413644982,3],[51.5143589918305,-0.136226113608836,2],[51.5143258278403,-0.136328132175019,1],[51.5145439352589,-0.136222147739477,1],[51.5145694098648,-0.136117449584061,1],[51.5145860585039,-0.13603032610347,1],[51.5146120020105,-0.136266512833731,1],[51.5145748931058,-0.136421363235172,2],[51.5145068922349,-0.136934565325728,3],[51.5142738740676,-0.136930812044807,3],[51.5142925294013,-0.136799217089535,1],[51.5140584415023,-0.136779604473422,1],[51.514147904667,-0.136695911836955,3],[51.5139612895256,-0.136712199114799,1],[51.514026681852,-0.136123239897924,1],[51.514075625164,-0.135958317916009,1],[51.5140955500651,-0.135882661614175,1],[51.5141341964856,-0.135787715898289,2],[51.5140332357038,-0.135849408611936,2],[51.51399639475,-0.13600822222389,4],[51.5139599546022,-0.136098773834616,5],[51.5139447099578,-0.136169607538601,2],[51.5138209431322,-0.135485063868566,5],[51.5139986643176,-0.135374041226318,5],[51.5137949340791,-0.135581830640019,3],[51.5137664510085,-0.135679025987977,3],[51.5137255314975,-0.135814477761582,1],[51.5136915654178,-0.135904600280311,5],[51.5136724428681,-0.135992150697614,4],[51.5136025045006,-0.136216866756181,4],[51.5134817494629,-0.136578747125891,1],[51.5134582133826,-0.13667508400121,4],[51.5134291944654,-0.136764348161167,1],[51.5134042540195,-0.136876973157585,3],[51.5133593215734,-0.13695294902936,2],[51.5133780414208,-0.137230493796608,1],[51.513854511423,-0.136650546959065,2],[51.5138745706323,-0.136502664677893,1],[51.513564922941,-0.13736659135294,1],[51.5136162065225,-0.137421887399464,2],[51.5137422432042,-0.137472256016921,3],[51.5139182142438,-0.138300115934668,1],[51.5137723972996,-0.137362664817636,1],[51.5135021957619,-0.137995119447203,4],[51.5137121442364,-0.138139258555061,2],[51.513643808406,-0.138239344033771,2],[51.5137110723171,-0.138271816604014,1],[51.5140612381261,-0.138082797902251,5],[51.5147479928322,-0.137911683038597,3],[51.5147942645459,-0.137707109451447,2],[51.5145260811066,-0.137107740547768,3],[51.5147058764589,-0.137064556384258,2],[51.5123109173558,-0.138473542100727,1],[51.5119984599128,-0.138123159327677,1],[51.5118557192269,-0.137762148270563,1]],null,null,{"minOpacity":0.05,"max":1,"radius":25,"blur":40}]},{"method":"addMarkers","args":[[51.5134177124172,51.5133613998342,51.5133170489738,51.5132621296606,51.5132039767177,51.5131835520485,51.5133591867692,51.5133280355029,51.5133229578595,51.5134266728971,51.5133811892354,51.5134623424476,51.5132159285183,51.5131694485925,51.5131164749112,51.5132396116239,51.5131644210432,51.5131781841165,51.5131111979614,51.5130554375432,51.5134413327101,51.5135924208041,51.5134023383083,51.5133795728564,51.5134107815111,51.5136414526995,51.5136934269499,51.5137448755457,51.5136761001242,51.513589650219,51.5136630762747,51.5135023127246,51.5135825682104,51.5135413161461,51.5132975437477,51.5132905255639,51.5130133334294,51.5129647596832,51.5128932509875,51.5129641586053,51.5130248397129,51.5130266757898,51.5128309621333,51.5128845609982,51.512526461566,51.5124652322484,51.5124282017241,51.5124146502324,51.5125095595528,51.5123779695186,51.5124468842647,51.5124910903494,51.5123735237671,51.5123394658191,51.5123641435114,51.5123186592339,51.5125404192213,51.5126486001691,51.5126924102854,51.5129565492695,51.5127646786194,51.512780135276,51.5127261821783,51.5126812212502,51.5129138940919,51.5130464173057,51.5130736199273,51.5130871653118,51.5131217300639,51.5131870380734,51.5132144650686,51.5132493670279,51.5132712298232,51.5133000053292,51.513159501803,51.5130159068474,51.5129212632447,51.5128901273703,51.5128594972903,51.5128304407162,51.5127817133823,51.5127289953887,51.5128684899971,51.5127227024346,51.5126544175993,51.5127129238493,51.5126151331328,51.5124909274326,51.512449001123,51.5124646732061,51.5124131425941,51.5123580283144,51.5122714848582,51.5123551037207,51.5119909705128,51.5120825390407,51.5120308435294,51.511969715045,51.5118816026324,51.5120498288562,51.5122501450068,51.5121617481752,51.5122122493473,51.5125728000174,51.5125753130745,51.512671783869,51.5127265275065,51.5127937521836,51.5128459418976,51.5128794716827,51.5129387875413,51.5127652622967,51.5128439493493,51.5125320092663,51.5121976542315,51.5122147337627,51.5131535576567,51.5130560038467,51.5131654276186,51.5130978234435,51.5132380800188,51.5132931133948,51.5133792266715,51.5134305977733,51.5134746492998,51.513421592435,51.5135280975109,51.513481380808,51.5135939675143,51.5132269067679,51.5131797922196,51.5131320343792,51.5130478021104,51.5130059829172,51.5128825050525,51.5132697651429,51.5134585203029,51.513431301037,51.5134020526073,51.5125929850428,51.5125846188892,51.5125545302918,51.5125207793547,51.5131371982402,51.513228105499,51.5131523869471,51.5132575922725,51.5135441147158,51.5136261147011,51.51363711464,51.5135240566799,51.513819503245,51.5137237779958,51.5137037259797,51.5138308609666,51.5139154145108,51.5135966548401,51.5140320770328,51.5138912073965,51.5137575614511,51.5140647728081,51.5141461334489,51.5142009244163,51.5142299752522,51.5143186433979,51.5143770664962,51.5143572324987,51.5143820227307,51.5144016914121,51.5145215552817,51.5144974265937,51.5144724263714,51.5145042399781,51.5145458084146,51.5145612191587,51.5145938592689,51.514581130254,51.5146055484873,51.5158344922564,51.5151947768411,51.515148910154,51.514818276315,51.5148434841345,51.5149136908635,51.5144955261107,51.5147432533526,51.5144670343971,51.514453057596,51.5148446763327,51.5143888129264,51.5143992425991,51.5143350546395,51.5142241938589,51.5142200496112,51.5141451611806,51.5141081200325,51.5143589918305,51.5143258278403,51.5145439352589,51.5145694098648,51.5145860585039,51.5146120020105,51.5145748931058,51.5145068922349,51.5142738740676,51.5142925294013,51.5140584415023,51.514147904667,51.5139612895256,51.514026681852,51.514075625164,51.5140955500651,51.5141341964856,51.5140332357038,51.51399639475,51.5139599546022,51.5139447099578,51.5138209431322,51.5139986643176,51.5137949340791,51.5137664510085,51.5137255314975,51.5136915654178,51.5136724428681,51.5136025045006,51.5134817494629,51.5134582133826,51.5134291944654,51.5134042540195,51.5133593215734,51.5133780414208,51.513854511423,51.5138745706323,51.513564922941,51.5136162065225,51.5137422432042,51.5139182142438,51.5137723972996,51.5135021957619,51.5137121442364,51.513643808406,51.5137110723171,51.5140612381261,51.5147479928322,51.5147942645459,51.5145260811066,51.5147058764589,51.5123109173558,51.5119984599128,51.5118557192269],[-0.137930104010558,-0.137883080050043,-0.137852910334902,-0.137811953946547,-0.13776682625895,-0.137536941414194,-0.138200478229867,-0.138045001181023,-0.138276150015847,-0.138223486436163,-0.138337036751987,-0.138562712674585,-0.138425595569866,-0.138378445203786,-0.138337151287555,-0.138645453374908,-0.138697906588005,-0.137924280930384,-0.137864911517368,-0.137811483555299,-0.138761923444541,-0.138798841466148,-0.139044685640647,-0.138969769250852,-0.138863423701818,-0.138752495986867,-0.138808158700832,-0.138856026577997,-0.138886865385659,-0.139239358857342,-0.139321273414791,-0.139315996025543,-0.139615957798045,-0.139719311011435,-0.140073811518465,-0.139094018235715,-0.13969719300269,-0.139327083693065,-0.139317388053158,-0.139186819378375,-0.13903594103458,-0.139209112335763,-0.138427009719529,-0.138624089822381,-0.138095738730479,-0.138034566532032,-0.137983558408747,-0.138064861673808,-0.138193772599653,-0.13781768058354,-0.137655876664111,-0.137584251590895,-0.137650308280313,-0.137449685402355,-0.137375960345323,-0.137327183060384,-0.136979895082568,-0.137180471112416,-0.137052256705603,-0.137695283980724,-0.137532968405366,-0.137419027899659,-0.137367685597074,-0.137324900434833,-0.13753072078947,-0.137561709372639,-0.137465963095969,-0.137386069143822,-0.137305905402978,-0.137088921783477,-0.136996507652827,-0.136858967055843,-0.136777631573641,-0.13670521328998,-0.136493541498875,-0.1363296093128,-0.13642355437644,-0.136523354073943,-0.136599464715498,-0.136698903900388,-0.136818608892988,-0.136972720982157,-0.13635852222683,-0.136629907913101,-0.136584421189908,-0.136422562827327,-0.136345100970831,-0.136437423660872,-0.13637725593617,-0.136196885696964,-0.136141564934112,-0.136101691853672,-0.13603019775476,-0.136309771693643,-0.135940418807579,-0.135857833871398,-0.135800071388929,-0.13571676147881,-0.135119199651659,-0.135144413368991,-0.135393879321116,-0.135409196321426,-0.135472107671099,-0.135765474474457,-0.13587129725092,-0.135975667166644,-0.136032902456437,-0.136115157826193,-0.136180249325612,-0.136083007793062,-0.136139451247873,-0.135328712820307,-0.135122094886835,-0.134644707328384,-0.134521544053972,-0.13496689238324,-0.135098133618687,-0.134393575502607,-0.134505247562517,-0.134436800798234,-0.134593602630156,-0.134640476323922,-0.134708685062981,-0.134756193685838,-0.135244384441936,-0.134897297638676,-0.135157928194478,-0.135344164321286,-0.135063381103534,-0.135800950518772,-0.135761610342889,-0.135740195630197,-0.135644938517451,-0.135601712101864,-0.13550137997266,-0.135832121260455,-0.136048811687163,-0.136139629106658,-0.136227828987915,-0.134999321749233,-0.134792944843084,-0.134896134291146,-0.13499995822671,-0.133482869177093,-0.133265220914633,-0.133296159096638,-0.132933520033842,-0.133998061085642,-0.134041910097202,-0.134156125430805,-0.134091267691142,-0.134272307054501,-0.134220279673234,-0.134704077450268,-0.134782332224299,-0.135010480599383,-0.134923206586314,-0.134884697385023,-0.134212375301518,-0.13413525046192,-0.134364183806531,-0.134446761264503,-0.134479407284249,-0.13465781338051,-0.134367284903915,-0.134178675873201,-0.134159802982986,-0.134068743540174,-0.134085166112154,-0.133821454567768,-0.133922315573705,-0.133849801388977,-0.133725297875756,-0.133745361367268,-0.133675758620499,-0.133563506220195,-0.133466554504968,-0.133392911328955,-0.13447415999148,-0.135259025703631,-0.13539533964416,-0.136022252986943,-0.136804117171357,-0.13658336059377,-0.135652973903524,-0.135577955351805,-0.134859650909087,-0.134689584742692,-0.13481827258339,-0.135703556340337,-0.135561351789002,-0.135648690168136,-0.135415186294267,-0.135576357841223,-0.135356677740601,-0.135475413644982,-0.136226113608836,-0.136328132175019,-0.136222147739477,-0.136117449584061,-0.13603032610347,-0.136266512833731,-0.136421363235172,-0.136934565325728,-0.136930812044807,-0.136799217089535,-0.136779604473422,-0.136695911836955,-0.136712199114799,-0.136123239897924,-0.135958317916009,-0.135882661614175,-0.135787715898289,-0.135849408611936,-0.13600822222389,-0.136098773834616,-0.136169607538601,-0.135485063868566,-0.135374041226318,-0.135581830640019,-0.135679025987977,-0.135814477761582,-0.135904600280311,-0.135992150697614,-0.136216866756181,-0.136578747125891,-0.13667508400121,-0.136764348161167,-0.136876973157585,-0.13695294902936,-0.137230493796608,-0.136650546959065,-0.136502664677893,-0.13736659135294,-0.137421887399464,-0.137472256016921,-0.138300115934668,-0.137362664817636,-0.137995119447203,-0.138139258555061,-0.138239344033771,-0.138271816604014,-0.138082797902251,-0.137911683038597,-0.137707109451447,-0.137107740547768,-0.137064556384258,-0.138473542100727,-0.138123159327677,-0.137762148270563],null,null,"Deaths",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[[51.5133411171264,51.5138759909098,51.5149055726104,51.5123540234819,51.5121388790536,51.5115423185445,51.5100193479995,51.5112952261304],[-0.136667876716997,-0.139586169059145,-0.13967102270027,-0.13162985673562,-0.133594411488385,-0.135919147673632,-0.133961736109809,-0.138198768040845],null,null,"Pumps",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[51.5100193479995,51.5158344922564],"lng":[-0.140073811518465,-0.13162985673562]}},"evals":[],"jsHooks":[]}</script>
<p>A heatmap (essentially a kernel density of spatial points; more on this in a later chapter) makes it very clear that most cases of cholera happend in the neighborhood of one (possibly contaminated) water pump! At the time, Snow noted with respect to this geographical pattern that:</p>
<blockquote>
<p>“It will be observed that the deaths either very much diminished, or ceased altogether, at every point where it becomes decidedly nearer to send to another pump than to the one in Broad street. It may also be noticed that the deaths are most numerous near to the pump where the water could be more readily obtained.”</p>
</blockquote>
<p>Snow’s analysis helped to convince officials to close the pump, after which the cholera outbreak subsided. This illustrates how even some relatively simple spatial analysis can help to inform public policy and even save lives. You can read more about this case <a href="https://en.wikipedia.org/wiki/1854_Broad_Street_cholera_outbreak">here</a>.</p>
<p>In this practice you have learned how to implement some simple mapping and spatial statistical analysis using <code>R</code>. In future readings we will further explore the potential of <code>R</code> for both.</p>
</div>
<div id="other-resources" class="section level2 hasAnchor" number="3.8">
<h2><span class="header-section-number">3.8</span> Other Resources<a href="introduction-to-maps.html#other-resources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For more information on the functionality of <code>leaflet</code>, please check <a href="https://rstudio.github.io/leaflet/">Leaflet for R</a></p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Bivand2008" class="csl-entry">
Bivand, R. S., E. J. Pebesma, and V. Gómez-Rubio. 2008. <em>Applied Spatial Data Analysis with r</em>. Book. New York: Springer Science+Business Media.
</div>
<div id="ref-Brunsdon2015R" class="csl-entry">
Brunsdon, Chris, and Lex Comber. 2015. <em>An Introduction to r for Spatial Analysis and Mapping</em>. Book. Sage.
</div>
<div id="ref-wickham2015rpackages" class="csl-entry">
Wickham, Hadley. 2015. <em>R Packages: Organize, Test, Document, and Share Your Code</em>. " O’Reilly Media, Inc.".
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basic-operations.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="activity-statistical-maps-i.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/paezha/spatial-analysis-R/edit/main/03-Introduction-to-Mapping.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["spatial-analysis-R.pdf", "spatial-analysis-R.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
